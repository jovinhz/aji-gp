var q=Object.defineProperty;var W=(n,e,a)=>e in n?q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var K=(n,e,a)=>(W(n,typeof e!="symbol"?e+"":e,a),a);import{B as R}from"./index-ea116739.js";import{_ as z}from"./AgGrid.vuevuetypescriptsetuptruelang-77b595bf.js";import{o as A,a as O}from"./index-e4830b65.js";import"./index-d6da99f3.js";/* empty css              */import{H as G,u as N}from"./HttpClient-4d61e396.js";import{d as B,r as b,O as $,w as U,e as _,a7 as E,ac as c,f as F,g as o,a9 as p,c as l,u as x,aa as T,ae as J,a as L,ak as P}from"./plugin-vueexport-helper-0ef99882.js";import{M as Q}from"./Modal-a79fac37.js";import{_ as X}from"./index-ad0e6402.js";import{I as Y,_ as Z,F as ee}from"./Input-faacc60f.js";import{T as ae,_ as te}from"./TabPane-76270f32.js";import"./pickAttrs-8b0a1b9e.js";class w{static list(){return this.HttpClient.axiosInstance.get("/units")}static create(e){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Satuan berhasil ditambah"}).axiosInstance.post("/units",e)}static update(e,a){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Satuan berhasil diupdate"}).axiosInstance.put(`/units/${e}`,a)}static delete(e){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Satuan berhasil dihapus"}).axiosInstance.delete(`/units/${e}`)}}K(w,"HttpClient",new G);const ne={class:"card card-custom card-dense"},se={class:"card-header"},oe={class:"card-title w-100 d-flex justify-content-between"},ie=c("h4",{class:"card-label"},"Form Master Satuan",-1),le={class:"card-body"},ce={class:"row"},de={class:"col-lg-6"},re=c("i",{class:"fe fe-save me-2"},null,-1),ue=B({__name:"Form",props:{formData:null,editMode:{type:Boolean}},emits:["cancelEdit","onSuccess"],setup(n,{emit:e}){const a=n,d=b(),t=$({}),h={code:[{required:!0,message:"Kode satuan wajib diisi",trigger:"change"}],name:[{required:!0,message:"Nama satuan wajib diisi",trigger:"change"}]},{run:f,loading:v,response:r}=N(),{run:m,loading:u,response:g}=N();async function C(){var s,i;try{a.editMode?await f(w.update(a.formData.id,{name:t.name})):(await f(w.create({code:t.code.toUpperCase(),name:t.name})),(s=r.value)!=null&&s.success&&M()),(i=r.value)!=null&&i.success&&e("onSuccess")}catch{}}async function y(){var s,i;try{await m(w.delete((s=a.formData)==null?void 0:s.id)),(i=g.value)!=null&&i.success&&(M(),e("onSuccess"))}catch{}}function M(){var s;if(a.editMode){for(const i in t)t[i]=void 0;e("cancelEdit")}else(s=d.value)==null||s.resetFields()}function V(){var s;Q.confirm({title:"Konfirmasi Hapus Satuan",content:`Apakah kamu sudah yakin ingin menghapus data ${(s=a.formData)==null?void 0:s.code} ?`,cancelText:"Batal",onOk:y})}return U(()=>a.formData,()=>{var s;a.formData&&((s=d.value)==null||s.clearValidate(),t.code=a.formData.code,t.name=a.formData.name)}),(s,i)=>{const k=X,H=Y,I=Z,S=R,j=ee;return _(),E("div",ne,[c("div",se,[c("div",oe,[ie,n.editMode?(_(),F(k,{key:0,color:"orange"},{default:o(()=>[p("Mode Edit")]),_:1})):(_(),F(k,{key:1,color:"cyan"},{default:o(()=>[p("Mode Input")]),_:1}))])]),c("div",le,[l(j,{ref_key:"formRef",ref:d,model:t,rules:h,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:i[2]||(i[2]=D=>x(A)(d.value,C))},{default:o(()=>[c("div",ce,[c("div",de,[l(I,{label:"Kode Unit",name:"code",ref:"code"},{default:o(()=>[l(H,{value:t.code,"onUpdate:value":i[0]||(i[0]=D=>t.code=D),valueModifiers:{trim:!0},style:{"text-transform":"uppercase"},disabled:n.editMode},null,8,["value","disabled"])]),_:1},512),l(I,{label:"Nama Unit",name:"name",ref:"name"},{default:o(()=>[l(H,{value:t.name,"onUpdate:value":i[1]||(i[1]=D=>t.name=D)},null,8,["value"])]),_:1},512),l(S,{type:"primary","html-type":"submit",loading:x(v)},{default:o(()=>[re,c("span",null,T(n.editMode?"Edit":"Simpan"),1)]),_:1},8,["loading"]),l(S,{class:"mx-3",onClick:M},{default:o(()=>[p(T(n.editMode?"Batal Edit":"Bersihkan"),1)]),_:1}),n.editMode?(_(),F(S,{key:0,danger:"",type:"primary",onClick:V,loading:x(u)},{default:o(()=>[p(" Hapus ")]),_:1},8,["loading"])):J("",!0)])])]),_:1},8,["model"])])])}}}),me=B({__name:"DataTable",props:{idx:null},emits:["rowClick"],setup(n,{emit:e}){const a=n,d=$({value:[{field:"code",headerName:"Kode Satuan",pinned:"left",minWidth:100},{field:"name",headerName:"Nama",minWidth:130},{field:"created_at",headerName:"Diinput Tgl",...O},{field:"updated_at",headerName:"Diupdate Tgl",...O},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}]}),t=$({value:null}),{run:h,response:f,loading:v}=N();async function r(){var u;try{await h(w.list()),(u=f.value)!=null&&u.success&&(t.value=f.value.data)}catch{}}function m(u){e("rowClick",u)}return L(()=>{r()}),U(()=>a.idx,()=>{r()}),(u,g)=>(_(),E("div",null,[l(z,{"row-data":t.value,"column-defs":d.value,loading:x(v),onRowClick:m},null,8,["row-data","column-defs","loading"])]))}}),fe=c("span",null,[c("i",{class:"fe fe-edit-2 me-2"}),p(" Input ")],-1),pe=c("span",null,[c("i",{class:"fe fe-search me-2"}),p(" Browse ")],-1),_e=c("i",{class:"fe fe-refresh-cw me-2"},null,-1),Ne=B({__name:"index",setup(n){const e=b("1"),a=b(),d=b(!1),t=b(1);function h(r){e.value="1",a.value={...r},d.value=!0}function f(){d.value=!1}function v(r){t.value+=1,r!==void 0&&(d.value=r)}return(r,m)=>{const u=te,g=R,C=ae;return _(),E("div",null,[l(C,{class:"input-browse-tab",activeKey:e.value,"onUpdate:activeKey":m[1]||(m[1]=y=>e.value=y),animated:""},P({default:o(()=>[l(u,{key:"1"},{tab:o(()=>[fe]),default:o(()=>[l(ue,{"form-data":a.value,"edit-mode":d.value,onCancelEdit:f,onOnSuccess:v},null,8,["form-data","edit-mode"])]),_:1}),l(u,{key:"2"},{tab:o(()=>[pe]),default:o(()=>[l(me,{idx:t.value,onRowClick:h},null,8,["idx"])]),_:1})]),_:2},[e.value==="2"?{name:"rightExtra",fn:o(()=>[l(g,{size:"small",class:"mt-3",onClick:m[0]||(m[0]=y=>t.value+=1)},{default:o(()=>[_e,p(" Refresh Data ")]),_:1})]),key:"0"}:void 0]),1032,["activeKey"])])}}});export{Ne as default};
