var at=Object.defineProperty;var st=(p,a,s)=>a in p?at(p,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[a]=s;var re=(p,a,s)=>(st(p,typeof a!="symbol"?a+"":a,s),s);import{B as oe,k as Ue}from"./index-153eefc2.js";import{_ as ke}from"./AgGrid.vuevuetypescriptsetuptruelang-ab13ecb9.js";import{o as se,r as qe,a as Y,b as Be,t as Me}from"./index-88aa8355.js";import"./index-7c3bc22f.js";import{S as Oe,_ as Pe}from"./index-fcb540cd.js";/* empty css              *//* empty css              */import{a as te,_ as _e,F as me,I as je}from"./Input-df745255.js";import{H as pe,u as H}from"./HttpClient-9b37a6d8.js";import{_ as Ne}from"./InputDropdown.vuevuetypescriptsetuptruelang-d8e7c5f6.js";import{u as it}from"./modal-e8545dd0.js";import{_ as Se}from"./index-1212a0e4.js";import{d as ie,O as z,r as g,a as ne,e as j,a7 as U,c as e,u as k,ac as f,aa as V,g as i,a9 as B,f as ce,ae as Ce,X as rt,F as Ke,ab as Ee,w as Ge,ak as ot}from"./plugin-vueexport-helper-0ef99882.js";import{M as $e}from"./Modal-dae6d828.js";import{D as ge}from"./dayjs-fd1479da.js";import{_ as Ae}from"./TextArea-dca2e1fe.js";import{_ as Ve}from"./UploadImage-05cfd09d.js";import{S as We}from"./Spin-da088909.js";import{_ as Je,T as Ye}from"./TabPane-a6349958.js";import"./pickAttrs-596f35c3.js";import"./useMemo-49158cc8.js";import"./DownOutlined-80526c88.js";import"./CheckOutlined-94b1a800.js";import"./SearchOutlined-1764655a.js";import"./index-a1c3b359.js";import"./index-aabd3ab6.js";import"./EyeOutlined-308ec9ea.js";import"./index-cd484bc9.js";class ve{static list(){return this.HttpClient.axiosInstance.get("/worklists")}static create(a){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Projek berhasil ditambah"}).axiosInstance.post("/worklists",a)}static update(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Projek berhasil diupdate"}).axiosInstance.put(`/worklists/${a}`,s)}static formOptions(a){return this.HttpClient.axiosInstance.get("/worklists/form_options",{params:{customer_id:a}})}}re(ve,"HttpClient",new pe);class ae{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_workers`)}static create(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Pekerja berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_workers`,s)}static update(a,s,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Pekerja berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_workers/${s}`,b)}static delete(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Pekerja berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_workers/${s}`)}static formOptions(){return this.HttpClient.axiosInstance.get("/worklists/current/worklist_workers/form_options")}static listAttendances(a,s){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_workers/${s}/worklist_worker_attendances`)}static createAttendances(a,s,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Absensi berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_workers/${s}/worklist_worker_attendances`,b)}static updateAttendances(a,s,b,$){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Absensi berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_workers/${s}/worklist_worker_attendances/${b}`,$)}}re(ae,"HttpClient",new pe);const nt={class:"card m-2 p-4"},lt={class:"mb-4"},ut={class:"row"},dt={class:"col-lg-6"},ct=f("i",{class:"fe fe-save me-2"},null,-1),_t={key:0,class:"card m-2 p-4"},mt={class:"d-flex justify-content-between mb-4"},pt=f("h5",{class:"m-0"},"Absensi",-1),ft=ie({__name:"PekerjaTab",props:{worklist_id:null},setup(p){const a=p,s=[{field:"worker.code",headerName:"Kode Pekerja",minWidth:120},{field:"worker.name",headerName:"Nama Pekerja",minWidth:120},{field:"salary",headerName:"Gaji",filter:"agNumberColumnFilter",type:"numericColumn",minWidth:120,valueGetter:v=>parseFloat(v.data.salary),valueFormatter:v=>qe(v.value)},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=[{field:"checkin_timestamp",headerName:"Tgl Check In",...Be},{field:"checkout_timestamp",headerName:"Tgl Check Out",...Be},{field:"working_hours",headerName:"Jam Kerja",filter:"agNumberColumnFilter",type:"numericColumn",width:150,flex:0,valueGetter:v=>parseFloat(v.data.working_hours).toPrecision(2)},{field:"salary_attendance",headerName:"Gaji",filter:"agNumberColumnFilter",type:"numericColumn",width:150,flex:0,valueGetter:v=>parseFloat(v.data.salary_attendance),valueFormatter:v=>qe(v.value)},{field:"extratime_working_hours",headerName:"Lembur (Jam)",filter:"agNumberColumnFilter",type:"numericColumn",width:150,flex:0,valueGetter:v=>parseFloat(v.data.extratime_working_hours).toPrecision(2)},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],$=[{field:"code",headerName:"Kode Pekerja"},{field:"name",headerName:"Nama Pekerja"}],h=z({value:null}),C=z({value:null}),t=g(!1),u=g(!1),x=g(),l=g(),A=g(),n=g(""),R=g(),S=z({}),L={worker_id:[{required:!0,message:"Pekerja wajib dipilih",trigger:"change"}],salary:[{required:!0,message:"Gaji wajib diisi",trigger:"change"}]},K=g(),N=z({}),O={checkin_timestamp:[{required:!0,message:"Waktu check-in wajib diisi",trigger:"change"}],checkout_timestamp:[{required:!0,message:"Waktu check-out wajib diisi",trigger:"change"}]},{run:r,response:M,loading:J}=H(),{run:W,response:F,loading:o}=H(),{run:d,response:T,loading:I}=H(),{run:Q,loading:c,response:D}=H(),{run:_,response:q,loading:w}=H(),{run:X,response:m,loading:E}=H(),{visible:le,open:P,close:ee}=it();async function ze(){var v,y,Z;try{t.value?(await d(ae.update(a.worklist_id,(v=x.value)==null?void 0:v.id,{worker_id:S.worker_id,salary:S.salary})),(y=T.value)!=null&&y.success&&De()):(await d(ae.create(a.worklist_id,{workers:[{worker_id:S.worker_id,salary:S.salary}]})),(Z=T.value)!=null&&Z.success&&(Te(),De()))}catch{}}async function De(){var v;try{await r(ae.list(a.worklist_id)),(v=M.value)!=null&&v.success&&(h.value=M.value.data)}catch{}}async function Qe(){var v;try{await W(ae.formOptions()),(v=F.value)!=null&&v.success&&(A.value=F.value.data)}catch{}}function Te(){var v;if(t.value)for(const y in S)S[y]=void 0;else(v=R.value)==null||v.resetFields();n.value="",t.value=!1,x.value=void 0}function Le(v){var y;(y=R.value)==null||y.clearValidate(),S.worker_id=v.worker.id,S.salary=parseInt(v.salary,10),n.value=`${v.worker.code} - ${v.worker.name}`,t.value=!0,x.value=v,Re(v.id)}async function Xe(){var v,y;try{await Q(ae.delete(a.worklist_id,(v=x.value)==null?void 0:v.id)),(y=D.value)!=null&&y.success&&(Te(),De())}catch{}}function Ze(){$e.confirm({title:"Konfirmasi Hapus Pekerja",content:"Apakah kamu sudah yakin ingin menghapus data "+n.value+" ?",cancelText:"Batal",onOk:Xe})}async function Re(v){var y;try{await _(ae.listAttendances(a.worklist_id,v)),(y=q.value)!=null&&y.success&&(C.value=q.value.data)}catch{}}async function Ie(){var v,y,Z,we,ue,be;try{u.value?(await X(ae.updateAttendances(a.worklist_id,(v=x.value)==null?void 0:v.id,(y=l.value)==null?void 0:y.id,{checkin_timestamp:N.checkin_timestamp+" +0700",checkout_timestamp:N.checkout_timestamp+" +0700"})),ee()):await X(ae.createAttendances(a.worklist_id,(Z=x.value)==null?void 0:Z.id,{checkin_timestamp:N.checkin_timestamp+" +0700",checkout_timestamp:N.checkout_timestamp+" +0700"})),(we=m.value)!=null&&we.success&&((ue=K.value)==null||ue.resetFields(),Re((be=x.value)==null?void 0:be.id))}catch{}}function et(v){u.value=!0,l.value=v,N.checkin_timestamp=te(l.value.checkin_timestamp).format("YYYY-MM-DD HH:mm:ss"),N.checkout_timestamp=te(l.value.checkout_timestamp).format("YYYY-MM-DD HH:mm:ss"),P()}return ne(()=>{De(),Qe()}),(v,y)=>{const Z=_e,we=Se,ue=oe,be=me,He=ge,tt=$e;return j(),U("div",null,[e(ke,{style:{height:"250px"},"row-data":h.value,"column-defs":s,loading:k(J),onRowClick:Le},null,8,["row-data","column-defs","loading"]),f("div",nt,[f("h5",lt,V(t.value?"Update":"Tambah")+" Pekerja",1),e(be,{ref_key:"formRef",ref:R,model:S,rules:L,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:y[2]||(y[2]=G=>k(se)(R.value,ze))},{default:i(()=>[f("div",ut,[f("div",dt,[e(Z,{label:"Pekerja",name:"worker_id",ref:"worker_id"},{default:i(()=>{var G;return[e(Ne,{"column-defs":$,"grid-data":((G=A.value)==null?void 0:G.workers)??[],loading:k(o),value:void 0,"value-display":n.value,onChange:y[0]||(y[0]=de=>{S.worker_id=de.id,n.value=`${de.code} - ${de.name}`})},null,8,["grid-data","loading","value-display"])]}),_:1},512),e(Z,{label:"Gaji",name:"salary",ref:"salary"},{default:i(()=>[e(we,{value:S.salary,"onUpdate:value":y[1]||(y[1]=G=>S.salary=G),min:0,formatter:G=>`${G}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:G=>G.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(ue,{type:"primary","html-type":"submit",loading:k(I)},{default:i(()=>[ct,f("span",null,V(t.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(ue,{class:"mx-3",onClick:Te},{default:i(()=>[B(V(t.value?"Batal Edit":"Bersihkan"),1)]),_:1}),t.value?(j(),ce(ue,{key:0,danger:"",type:"primary",onClick:Ze,loading:k(c)},{default:i(()=>[B(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])]),x.value?(j(),U("div",_t,[f("div",mt,[pt,e(ue,{type:"primary",onClick:y[3]||(y[3]=()=>{var G;u.value=!1,N.checkin_timestamp=void 0,N.checkout_timestamp=void 0,(G=K.value)==null||G.clearValidate(),k(P)()})},{default:i(()=>[B(" Tambah ")]),_:1})]),e(ke,{style:{height:"250px"},"row-data":C.value,"column-defs":b,loading:k(w),onRowClick:et},null,8,["row-data","column-defs","loading"])])):Ce("",!0),e(tt,{visible:k(le),"onUpdate:visible":y[7]||(y[7]=G=>rt(le)?le.value=G:null),title:u.value?"Update Absensi":"Tambah Absensi","cancel-text":"Tutup",onOk:y[8]||(y[8]=G=>k(se)(K.value,Ie))},{default:i(()=>[e(be,{ref_key:"formRefAttendance",ref:K,model:N,rules:O,"label-col":{style:{width:"110px"}},colon:!1,"label-align":"left",onFinish:y[6]||(y[6]=G=>k(se)(K.value,Ie))},{default:i(()=>[e(Z,{label:"Check In",ref:"checkin_timestamp",name:"checkin_timestamp"},{default:i(()=>[e(He,{"show-time":"",value:N.checkin_timestamp?k(te)(N.checkin_timestamp):void 0,onChange:y[4]||(y[4]=(G,de)=>N.checkin_timestamp=de)},null,8,["value"])]),_:1},512),e(Z,{label:"Check Out",ref:"checkin_timestamp",name:"checkin_timestamp"},{default:i(()=>[e(He,{"show-time":"",value:N.checkout_timestamp?k(te)(N.checkout_timestamp):void 0,onChange:y[5]||(y[5]=(G,de)=>N.checkout_timestamp=de)},null,8,["value"])]),_:1},512)]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});class fe{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_products`)}static create(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_products`,s)}static update(a,s,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_products/${s}`,b)}static delete(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_products/${s}`)}static formOptions(){return this.HttpClient.axiosInstance.get("/worklists/current/worklist_products/form_options")}}re(fe,"HttpClient",new pe);const ht={class:"m-2 p-4 card"},vt={class:"mb-4"},kt={class:"row"},gt={class:"col-lg-6"},wt=f("i",{class:"fe fe-save me-2"},null,-1),bt=ie({__name:"ProdukTab",props:{worklist_id:null},setup(p){const a=p,s=[{field:"product.code",headerName:"Kode Produk",minWidth:120},{field:"product.name",headerName:"Nama Produk",minWidth:120},{field:"qty_request",headerName:"Qty Request",filter:"agNumberColumnFilter",type:"numericColumn",minWidth:120,valueGetter:_=>parseFloat(_.data.qty_request),valueFormatter:_=>Me(_.value)},{field:"qty_realization",headerName:"Qty Realisasi",filter:"agNumberColumnFilter",type:"numericColumn",minWidth:120,valueGetter:_=>_.data.qty_realization!==null?parseFloat(_.data.qty_realization):null,valueFormatter:_=>Me(_.value)},{field:"note",headerName:"Keterangan",minWidth:120},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=[{field:"code",headerName:"Kode Produk"},{field:"name",headerName:"Nama Produk"}],$=z({value:null}),h=g(!1),C=g(),t=g(),u=g(""),x=g(),l=z({}),A={product_id:[{required:!0,message:"Pekerja wajib dipilih",trigger:"change"}],qty_request:[{required:!0,message:"Qty request wajib diisi",trigger:"change"}],note:[{required:!0,message:"Catatan wajib diisi",trigger:"change"}]},{run:n,response:R,loading:S}=H(),{run:L,response:K,loading:N}=H(),{run:O,response:r,loading:M}=H(),{run:J,loading:W,response:F}=H();async function o(){var _,q,w;try{h.value?(await O(fe.update(a.worklist_id,(_=C.value)==null?void 0:_.id,{product_id:l.product_id,qty_request:l.qty_request,note:l.note})),(q=r.value)!=null&&q.success&&d()):(await O(fe.create(a.worklist_id,{products:[{product_id:l.product_id,qty_request:l.qty_request,note:l.note}]})),(w=r.value)!=null&&w.success&&(I(),d()))}catch{}}async function d(){var _;try{await n(fe.list(a.worklist_id)),(_=R.value)!=null&&_.success&&($.value=R.value.data)}catch{}}async function T(){var _;try{await L(fe.formOptions()),(_=K.value)!=null&&_.success&&(t.value=K.value.data)}catch{}}function I(){var _;if(h)for(const q in l)l[q]=void 0;else(_=x.value)==null||_.resetFields();u.value="",h.value=!1,C.value=void 0}function Q(_){var q;(q=x.value)==null||q.clearValidate(),l.product_id=_.product.id,l.qty_request=parseInt(_.qty_request,10),l.note=_.note,u.value=`${_.product.code} - ${_.product.name}`,h.value=!0,C.value=_}async function c(){var _,q;try{await J(fe.delete(a.worklist_id,(_=C.value)==null?void 0:_.id)),(q=F.value)!=null&&q.success&&(I(),d())}catch{}}function D(){$e.confirm({title:"Konfirmasi Hapus Pekerja",content:"Apakah kamu sudah yakin ingin menghapus data "+u.value+" ?",cancelText:"Batal",onOk:c})}return ne(()=>{d(),T()}),(_,q)=>{const w=_e,X=Se,m=Ae,E=oe,le=me;return j(),U("div",null,[e(ke,{style:{height:"250px"},"row-data":$.value,"column-defs":s,loading:k(S),onRowClick:Q},null,8,["row-data","column-defs","loading"]),f("div",ht,[f("h5",vt,V(h.value?"Update":"Tambah")+" Produk",1),e(le,{ref_key:"formRef",ref:x,model:l,rules:A,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:q[3]||(q[3]=P=>k(se)(x.value,o))},{default:i(()=>[f("div",kt,[f("div",gt,[e(w,{label:"Produk",name:"product_id",ref:"product_id"},{default:i(()=>{var P;return[e(Ne,{"column-defs":b,"grid-data":((P=t.value)==null?void 0:P.products)??[],loading:k(N),value:void 0,"value-display":u.value,onChange:q[0]||(q[0]=ee=>{l.product_id=ee.id,u.value=`${ee.code} - ${ee.name}`})},null,8,["grid-data","loading","value-display"])]}),_:1},512),e(w,{label:"Qty",name:"qty_request",ref:"qty_request"},{default:i(()=>[e(X,{value:l.qty_request,"onUpdate:value":q[1]||(q[1]=P=>l.qty_request=P),min:0,formatter:P=>`${P}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:P=>P.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(w,{label:"Catatan",name:"note",ref:"note"},{default:i(()=>[e(m,{value:l.note,"onUpdate:value":q[2]||(q[2]=P=>l.note=P)},null,8,["value"])]),_:1},512),e(E,{type:"primary","html-type":"submit",loading:k(M)},{default:i(()=>[wt,f("span",null,V(h.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(E,{class:"mx-3",onClick:I},{default:i(()=>[B(V(h.value?"Batal Edit":"Bersihkan"),1)]),_:1}),h.value?(j(),ce(E,{key:0,danger:"",type:"primary",onClick:D,loading:k(W)},{default:i(()=>[B(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])])])}}});class xe{static show(a){return this.HttpClient.withOptions({showSuccessFeedback:!1,showErrorFeedback:!1}).axiosInstance.get(`/worklists/${a}/worklist_purchase_requisition`)}static create(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PR berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_purchase_requisition`,s)}static update(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PR berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_purchase_requisition`,s)}}re(xe,"HttpClient",new pe);const yt={key:0,class:"p-4 text-center"},Ct={key:1,class:"p-4"},$t={key:0,class:"text-center"},Dt={key:1},xt={class:"row"},Ft={class:"col-lg-6"},qt=f("i",{class:"fe fe-save me-2"},null,-1),Nt=ie({__name:"PrTab",props:{worklist_id:null},setup(p){const a=p,s=g(!1),b=g(!1),$=g(!1),h=g(""),C=g(),t=z({}),u={purchase_requisition_number:[{required:!0,message:"No PR wajib diisi",trigger:"change"}],status_id:[{required:!0,message:"Status wajib dipilih",trigger:"change"}],purchase_requisition_date:[{required:!0,message:"Tgl PR wajib diisi",trigger:"change"}],attachment:[{required:!0,message:"Dokumen PR wajib diupload",trigger:"change"}]},{run:x,response:l,loading:A}=H(),{run:n,response:R,loading:S}=H();async function L(){var O;try{if(s.value){const r=new FormData;r.set("purchase_requisition_number",t.purchase_requisition_number),r.set("purchase_requisition_date",t.purchase_requisition_date),r.set("status_id",t.status_id.toString()),t.attachment!==h.value&&r.set("attachment",t.attachment),await n(xe.update(a.worklist_id,r))}else{const r=new FormData;r.set("purchase_requisition_number",t.purchase_requisition_number),r.set("purchase_requisition_date",t.purchase_requisition_date),r.set("status_id",t.status_id.toString()),r.set("attachment",t.attachment),await n(xe.create(a.worklist_id,r)),(O=R.value)!=null&&O.success&&(s.value=!0,b.value=!1)}}catch{}}async function K(){var O,r;try{await x(xe.show(a.worklist_id)),(O=l.value)!=null&&O.success?(t.purchase_requisition_number=l.value.data.purchase_requisition_number,t.purchase_requisition_date=l.value.data.purchase_requisition_date,t.status_id=l.value.data.status_id,t.attachment=l.value.data.attachment_url,h.value=l.value.data.attachment_url,s.value=!0):((r=l.value)==null?void 0:r.status)===404&&(b.value=!0)}catch{}}function N(O,r){var M;h.value=O,t.attachment=r,(M=C.value)==null||M.validateFields("attachment")}return ne(()=>{K()}),(O,r)=>{const M=We,J=Ue,W=oe,F=je,o=_e,d=Oe,T=Pe,I=ge,Q=me;return j(),U("div",null,[k(A)?(j(),U("div",yt,[e(M)])):(j(),U("div",Ct,[b.value&&!$.value?(j(),U("div",$t,[e(J,{description:"Belum ada PR"}),e(W,{type:"primary",onClick:r[0]||(r[0]=c=>$.value=!0)},{default:i(()=>[B(" Buat PR ")]),_:1})])):(j(),U("div",Dt,[e(Q,{ref_key:"formRef",ref:C,model:t,rules:u,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:r[4]||(r[4]=c=>k(se)(C.value,L))},{default:i(()=>[f("div",xt,[f("div",Ft,[e(o,{label:"No PR",ref:"purchase_requisition_number",name:"purchase_requisition_number"},{default:i(()=>[e(F,{value:t.purchase_requisition_number,"onUpdate:value":r[1]||(r[1]=c=>t.purchase_requisition_number=c)},null,8,["value"])]),_:1},512),e(o,{label:"Status",ref:"status_id",name:"status_id"},{default:i(()=>[e(T,{value:t.status_id,"onUpdate:value":r[2]||(r[2]=c=>t.status_id=c)},{default:i(()=>[e(d,{value:1},{default:i(()=>[B(" Aktif ")]),_:1}),e(d,{value:2},{default:i(()=>[B(" Batal ")]),_:1})]),_:1},8,["value"])]),_:1},512),e(o,{label:"Tgl PR",name:"purchase_requisition_date",ref:"purchase_requisition_date"},{default:i(()=>[e(I,{value:t.purchase_requisition_date?k(te)(t.purchase_requisition_date):void 0,onChange:r[3]||(r[3]=(c,D)=>t.purchase_requisition_date=D)},null,8,["value"])]),_:1},512),e(o,{label:"Attachment",ref:"attachment",name:"attachment"},{default:i(()=>[e(Ve,{"img-url":h.value,onChange:N},null,8,["img-url"])]),_:1},512),e(W,{type:"primary","html-type":"submit",loading:k(S)},{default:i(()=>[qt,f("span",null,V(s.value?"Edit":"Simpan"),1)]),_:1},8,["loading"])])])]),_:1},8,["model"])]))]))])}}});class Fe{static show(a){return this.HttpClient.withOptions({showSuccessFeedback:!1,showErrorFeedback:!1}).axiosInstance.get(`/worklists/${a}/worklist_purchase_order`)}static create(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PO berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_purchase_order`,s)}static update(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PO berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_purchase_order`,s)}}re(Fe,"HttpClient",new pe);const Ot={key:0,class:"p-4 text-center"},Pt={key:1,class:"p-4"},jt={key:0,class:"text-center"},St={key:1},Tt={class:"row"},Ht={class:"col-lg-6"},Mt=f("i",{class:"fe fe-save me-2"},null,-1),At=ie({__name:"PoTab",props:{worklist_id:null},setup(p){const a=p,s=g(!1),b=g(!1),$=g(!1),h=g(""),C=g(),t=z({}),u={purchase_order_number:[{required:!0,message:"No PO wajib diisi",trigger:"change"}],status_id:[{required:!0,message:"Status wajib dipilih",trigger:"change"}],purchase_order_date:[{required:!0,message:"Tgl PO wajib diisi",trigger:"change"}],attachment:[{required:!0,message:"Dokumen PO wajib diupload",trigger:"change"}]},{run:x,response:l,loading:A}=H(),{run:n,response:R,loading:S}=H();async function L(){var O;try{if(s.value){const r=new FormData;r.set("purchase_order_number",t.purchase_order_number),r.set("purchase_order_date",t.purchase_order_date),r.set("status_id",t.status_id.toString()),t.attachment!==h.value&&r.set("attachment",t.attachment),await n(Fe.update(a.worklist_id,r))}else{const r=new FormData;r.set("purchase_order_number",t.purchase_order_number),r.set("purchase_order_date",t.purchase_order_date),r.set("status_id",t.status_id.toString()),r.set("attachment",t.attachment),await n(Fe.create(a.worklist_id,r)),(O=R.value)!=null&&O.success&&(s.value=!0,b.value=!1)}}catch{}}async function K(){var O,r;try{await x(Fe.show(a.worklist_id)),(O=l.value)!=null&&O.success?(t.purchase_order_number=l.value.data.purchase_order_number,t.purchase_order_date=l.value.data.purchase_order_date,t.status_id=l.value.data.status_id,t.attachment=l.value.data.attachment_url,h.value=l.value.data.attachment_url,s.value=!0):((r=l.value)==null?void 0:r.status)===404&&(b.value=!0)}catch{}}function N(O,r){var M;h.value=O,t.attachment=r,(M=C.value)==null||M.validateFields("attachment")}return ne(()=>{K()}),(O,r)=>{const M=We,J=Ue,W=oe,F=je,o=_e,d=Oe,T=Pe,I=ge,Q=me;return j(),U("div",null,[k(A)?(j(),U("div",Ot,[e(M)])):(j(),U("div",Pt,[b.value&&!$.value?(j(),U("div",jt,[e(J,{description:"Belum ada PO"}),e(W,{type:"primary",onClick:r[0]||(r[0]=c=>$.value=!0)},{default:i(()=>[B(" Buat PO ")]),_:1})])):(j(),U("div",St,[e(Q,{ref_key:"formRef",ref:C,model:t,rules:u,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:r[4]||(r[4]=c=>k(se)(C.value,L))},{default:i(()=>[f("div",Tt,[f("div",Ht,[e(o,{label:"No PO",ref:"purchase_order_number",name:"purchase_order_number"},{default:i(()=>[e(F,{value:t.purchase_order_number,"onUpdate:value":r[1]||(r[1]=c=>t.purchase_order_number=c)},null,8,["value"])]),_:1},512),e(o,{label:"Status",ref:"status_id",name:"status_id"},{default:i(()=>[e(T,{value:t.status_id,"onUpdate:value":r[2]||(r[2]=c=>t.status_id=c)},{default:i(()=>[e(d,{value:1},{default:i(()=>[B(" Aktif ")]),_:1}),e(d,{value:2},{default:i(()=>[B(" Batal ")]),_:1})]),_:1},8,["value"])]),_:1},512),e(o,{label:"Tgl PO",name:"purchase_order_date",ref:"purchase_order_date"},{default:i(()=>[e(I,{value:t.purchase_order_date?k(te)(t.purchase_order_date):void 0,onChange:r[3]||(r[3]=(c,D)=>t.purchase_order_date=D)},null,8,["value"])]),_:1},512),e(o,{label:"Attachment",ref:"attachment",name:"attachment"},{default:i(()=>[e(Ve,{"img-url":h.value,onChange:N},null,8,["img-url"])]),_:1},512),e(W,{type:"primary","html-type":"submit",loading:k(S)},{default:i(()=>[Mt,f("span",null,V(s.value?"Edit":"Simpan"),1)]),_:1},8,["loading"])])])]),_:1},8,["model"])]))]))])}}});class ye{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_operational_fees`)}static create(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Biaya Operasional berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_operational_fees`,s)}static update(a,s,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Biaya Operasional berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_operational_fees/${s}`,b)}static delete(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Biaya Operasional berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_operational_fees/${s}`)}}re(ye,"HttpClient",new pe);const Rt={class:"m-2 p-4 card"},It={class:"mb-4"},Bt={class:"row"},Ut={class:"col-lg-6"},Kt=f("i",{class:"fe fe-save me-2"},null,-1),Et=ie({__name:"BiayaOperasionalTab",props:{worklist_id:null},setup(p){const a=p,s=[{field:"request_number",headerName:"No Tran",width:100,flex:0},{field:"date",headerName:"No Tran",...Y},{field:"petty_cash",headerName:"Petty Cash",filter:"agNumberColumnFilter",type:"numericColumn",valueGetter:o=>o.data.petty_cash?parseFloat(o.data.petty_cash):null,valueFormatter:o=>o.value?qe(o.value):""},{field:"price",headerName:"Harga",filter:"agNumberColumnFilter",type:"numericColumn",valueGetter:o=>parseFloat(o.data.price),valueFormatter:o=>qe(o.value)},{field:"transfered_at",headerName:"Transfer Tgl",...Y},{field:"note",headerName:"Keterangan",minWidth:120},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=z({value:null}),$=g(!1),h=g(),C=g(),t=z({}),u={date:[{required:!0,message:"Tanggal wajib diisi",trigger:"change"}],request_number:[{required:!0,message:"No transaksi wajib diisi",trigger:"change"}],price:[{required:!0,message:"Harga wajib diisi",trigger:"change"}]},{run:x,response:l,loading:A}=H(),{run:n,response:R,loading:S}=H(),{run:L,loading:K,response:N}=H();async function O(){var o,d,T;try{$.value?(await n(ye.update(a.worklist_id,(o=h.value)==null?void 0:o.id,{date:t.date,price:t.price,request_number:t.request_number,note:t.note,petty_cash:t.petty_cash,transfered_at:t.transfered_at})),(d=R.value)!=null&&d.success&&r()):(await n(ye.create(a.worklist_id,{date:t.date,price:t.price,request_number:t.request_number,note:t.note,petty_cash:t.petty_cash,transfered_at:t.transfered_at})),(T=R.value)!=null&&T.success&&(M(),r()))}catch{}}async function r(){var o;try{await x(ye.list(a.worklist_id)),(o=l.value)!=null&&o.success&&(b.value=l.value.data)}catch{}}function M(){var o;if($)for(const d in t)t[d]=void 0;else(o=C.value)==null||o.resetFields();$.value=!1,h.value=void 0}function J(o){var d;(d=C.value)==null||d.clearValidate(),t.date=o.date,t.note=o.note,t.petty_cash=o.petty_cash,t.price=o.price,t.request_number=o.request_number,t.transfered_at=o.transfered_at,$.value=!0,h.value=o}async function W(){var o,d;try{await L(ye.delete(a.worklist_id,(o=h.value)==null?void 0:o.id)),(d=N.value)!=null&&d.success&&(M(),r())}catch{}}function F(){$e.confirm({title:"Konfirmasi Hapus Biaya Operasional",content:"Apakah kamu sudah yakin ingin menghapus data "+t.request_number+" ?",cancelText:"Batal",onOk:W})}return ne(()=>{r()}),(o,d)=>{const T=je,I=_e,Q=ge,c=Se,D=Ae,_=oe,q=me;return j(),U("div",null,[e(ke,{style:{height:"250px"},"row-data":b.value,"column-defs":s,loading:k(A),onRowClick:J},null,8,["row-data","column-defs","loading"]),f("div",Rt,[f("h5",It,V($.value?"Update":"Tambah")+" Biaya Operasional ",1),e(q,{ref_key:"formRef",ref:C,model:t,rules:u,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:d[6]||(d[6]=w=>k(se)(C.value,O))},{default:i(()=>[f("div",Bt,[f("div",Ut,[e(I,{label:"No Tran",name:"request_number",ref:"request_number"},{default:i(()=>[e(T,{value:t.request_number,"onUpdate:value":d[0]||(d[0]=w=>t.request_number=w)},null,8,["value"])]),_:1},512),e(I,{label:"Tgl Transaksi",name:"date",ref:"date"},{default:i(()=>[e(Q,{value:t.date?k(te)(t.date):void 0,onChange:d[1]||(d[1]=(w,X)=>t.date=X)},null,8,["value"])]),_:1},512),e(I,{label:"Harga",name:"price",ref:"price"},{default:i(()=>[e(c,{value:t.price,"onUpdate:value":d[2]||(d[2]=w=>t.price=w),min:0,formatter:w=>`${w}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:w=>w.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(I,{label:"Petty Cash",name:"petty_cash",ref:"petty_cash"},{default:i(()=>[e(c,{value:t.petty_cash,"onUpdate:value":d[3]||(d[3]=w=>t.petty_cash=w),min:0,formatter:w=>`${w}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:w=>w.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(I,{label:"Tgl Transfer",name:"transfered_at",ref:"transfered_at"},{default:i(()=>[e(Q,{value:t.transfered_at?k(te)(t.transfered_at):void 0,onChange:d[4]||(d[4]=(w,X)=>t.transfered_at=X)},null,8,["value"])]),_:1},512),e(I,{label:"Catatan",name:"note",ref:"note"},{default:i(()=>[e(D,{value:t.note,"onUpdate:value":d[5]||(d[5]=w=>t.note=w)},null,8,["value"])]),_:1},512),e(_,{type:"primary","html-type":"submit",loading:k(S)},{default:i(()=>[Kt,f("span",null,V($.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(_,{class:"mx-3",onClick:M},{default:i(()=>[B(V($.value?"Batal Edit":"Bersihkan"),1)]),_:1}),$.value?(j(),ce(_,{key:0,danger:"",type:"primary",onClick:F,loading:k(K)},{default:i(()=>[B(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])])])}}});class he{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_progresses`)}static create(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Progress Projek berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_progresses`,s)}static update(a,s,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Progress Projek berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_progresses/${s}`,b)}static delete(a,s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Progress Projek berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_progresses/${s}`)}static formOptions(){return this.HttpClient.axiosInstance.get("/worklists/current/worklist_progresses/form_options")}}re(he,"HttpClient",new pe);const Gt={class:"m-2 p-4 card"},Vt={class:"mb-4"},Wt={class:"row"},Jt={class:"col-lg-6"},Yt=f("i",{class:"fe fe-save me-2"},null,-1),zt=ie({__name:"ProgressTab",props:{worklist_id:null},setup(p){const a=p,s=[{field:"cost_type.title",headerName:"Jenis",width:150,flex:0},{field:"follow_up_date",headerName:"Tgl Follow Up",...Y},{field:"percentage_of_work",headerName:"Persentase",filter:"agNumberColumnFilter",type:"numericColumn",valueGetter:c=>parseFloat(c.data.percentage_of_work),valueFormatter:c=>Me(c.value)},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=z({value:null}),$=g(),h=g(!1),C=g(),t=g(),u=z({}),x={cost_type_id:[{required:!0,message:"Jenis wajib diisi",trigger:"change"}],follow_up_date:[{required:!0,message:"Tgl follow up wajib diisi",trigger:"change"}],percentage_of_work:[{required:!0,message:"Persentase wajib diisi",trigger:"change"}]},{run:l,response:A,loading:n}=H(),{run:R,response:S,loading:L}=H(),{run:K,loading:N,response:O}=H(),{run:r,loading:M,response:J}=H();async function W(){var c,D,_;try{h.value?(await R(he.update(a.worklist_id,(c=C.value)==null?void 0:c.id,{cost_type_id:u.cost_type_id,follow_up_date:u.follow_up_date,percentage_of_work:u.percentage_of_work})),(D=S.value)!=null&&D.success&&F()):(await R(he.create(a.worklist_id,{cost_type_id:u.cost_type_id,follow_up_date:u.follow_up_date,percentage_of_work:u.percentage_of_work})),(_=S.value)!=null&&_.success&&(d(),F()))}catch{}}async function F(){var c;try{await l(he.list(a.worklist_id)),(c=A.value)!=null&&c.success&&(b.value=A.value.data)}catch{}}async function o(){var c;try{await r(he.formOptions()),(c=J.value)!=null&&c.success&&($.value=J.value.data)}catch{}}function d(){var c;if(h)for(const D in u)u[D]=void 0;else(c=t.value)==null||c.resetFields();h.value=!1,C.value=void 0}function T(c){var D;(D=t.value)==null||D.clearValidate(),u.cost_type_id=c.cost_type.id,u.follow_up_date=c.follow_up_date,u.percentage_of_work=c.percentage_of_work,h.value=!0,C.value=c}async function I(){var c,D;try{await K(he.delete(a.worklist_id,(c=C.value)==null?void 0:c.id)),(D=O.value)!=null&&D.success&&(d(),F())}catch{}}function Q(){$e.confirm({title:"Konfirmasi Hapus Progress",content:"Apakah kamu sudah yakin ingin menghapus data  ?",cancelText:"Batal",onOk:I})}return ne(()=>{F(),o()}),(c,D)=>{const _=Oe,q=Pe,w=_e,X=ge,m=Se,E=oe,le=me;return j(),U("div",null,[e(ke,{style:{height:"250px"},"row-data":b.value,"column-defs":s,loading:k(n),onRowClick:T},null,8,["row-data","column-defs","loading"]),f("div",Gt,[f("h5",Vt,V(h.value?"Update":"Tambah")+" Progress",1),e(le,{ref_key:"formRef",ref:t,model:u,rules:x,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:D[3]||(D[3]=P=>k(se)(t.value,W))},{default:i(()=>[f("div",Wt,[f("div",Jt,[e(w,{label:"Jenis",name:"cost_type_id",ref:"cost_type_id"},{default:i(()=>[e(q,{value:u.cost_type_id,"onUpdate:value":D[0]||(D[0]=P=>u.cost_type_id=P)},{default:i(()=>{var P;return[(j(!0),U(Ke,null,Ee((P=$.value)==null?void 0:P.cost_types,ee=>(j(),ce(_,{value:ee.id},{default:i(()=>[B(V(ee.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),e(w,{label:"Tgl Follow Up",name:"follow_up_date",ref:"follow_up_date"},{default:i(()=>[e(X,{value:u.follow_up_date?k(te)(u.follow_up_date):void 0,onChange:D[1]||(D[1]=(P,ee)=>u.follow_up_date=ee)},null,8,["value"])]),_:1},512),e(w,{label:"Persentase",name:"percentage_of_work",ref:"percentage_of_work"},{default:i(()=>[e(m,{value:u.percentage_of_work,"onUpdate:value":D[2]||(D[2]=P=>u.percentage_of_work=P),min:0,formatter:P=>`${P}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:P=>P.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(E,{type:"primary","html-type":"submit",loading:k(L)},{default:i(()=>[Yt,f("span",null,V(h.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(E,{class:"mx-3",onClick:d},{default:i(()=>[B(V(h.value?"Batal Edit":"Bersihkan"),1)]),_:1}),h.value?(j(),ce(E,{key:0,danger:"",type:"primary",onClick:Q,loading:k(N)},{default:i(()=>[B(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])])])}}}),Qt={class:"card card-custom card-dense"},Lt={class:"card-body"},Xt={class:"row"},Zt={class:"col-lg-6"},ea=f("i",{class:"fe fe-save me-2"},null,-1),ta=ie({__name:"Form",props:{formData:null,editMode:{type:Boolean}},emits:["cancelEdit","onSuccess"],setup(p,{emit:a}){const s=p,b=[{field:"code",headerName:"Kode Customer"},{field:"name",headerName:"Nama Customer"},{field:"customer_group.name",headerName:"Grup Customer"},{field:"address",headerName:"Alamat"},{field:"note",headerName:"Keterangan"}],$=[{field:"code",headerName:"Kode Unit"},{field:"name",headerName:"Nama Unit"}],h=g(0),C=g("1"),t=g(""),u=g(""),x=g(),l=g(),A=g(),n=z({}),R={customer_id:[{required:!0,message:"Customer wajib dipilih",trigger:"change"}],customer_unit_id:[{required:!0,message:"Customer unit wajib dipilih",trigger:"change"}],worklist_date:[{required:!0,message:"Tanggal projek wajib diisi",trigger:"change"}],type_id:[{required:!0,message:"Tipe projek wajib dipilih",trigger:"change"}],title:[{required:!0,message:"Judul projek wajib diisi",trigger:"change"}]},{run:S,loading:L,response:K}=H(),{run:N,loading:O,response:r}=H();async function M(){var F,o,d;try{s.editMode?await S(ve.update((F=s.formData)==null?void 0:F.id,{customer_id:n.customer_id,customer_unit_id:n.customer_unit_id,title:n.title,type_id:n.type_id,worklist_date:n.worklist_date,note:n.note})):(await S(ve.create({customer_id:n.customer_id,customer_unit_id:n.customer_unit_id,type_id:n.type_id,title:n.title,worklist_date:n.worklist_date,note:n.note})),(o=K.value)!=null&&o.success&&J()),(d=K.value)!=null&&d.success&&a("onSuccess")}catch{}}function J(){var F;if(s.editMode){for(const o in n)n[o]=void 0;a("cancelEdit")}else{(F=A.value)==null||F.resetFields();for(const o in n)n[o]=void 0}u.value="",t.value=""}async function W(){var F;try{await N(ve.formOptions(n.customer_id)),(F=r.value)!=null&&F.success&&(l.value=r.value.data.customer_units)}catch{}}return Ge(()=>s.formData,()=>{var F;s.formData&&(C.value="1",h.value+=1,(F=A.value)==null||F.clearValidate(),n.customer_id=s.formData.customer.id,n.customer_unit_id=s.formData.customer_unit.id,n.title=s.formData.title,n.note=s.formData.note,n.type_id=s.formData.type_id,n.worklist_date=s.formData.worklist_date,u.value=`${s.formData.customer_unit.code} - ${s.formData.customer_unit.name}`,t.value=`${s.formData.customer.code} - ${s.formData.customer.name}`,W())}),ne(async()=>{var F;try{await N(ve.formOptions()),(F=r.value)!=null&&F.success&&(x.value=r.value.data)}catch{}}),(F,o)=>{const d=je,T=_e,I=ge,Q=Oe,c=Pe,D=Ae,_=oe,q=me,w=Je,X=Ye;return j(),U("div",Qt,[(j(),ce(X,{activeKey:C.value,"onUpdate:activeKey":o[7]||(o[7]=m=>C.value=m),type:"card","destroy-inactive-tab-pane":!1,key:`${h.value}`},{default:i(()=>[e(w,{key:"1",tab:"Projek"},{default:i(()=>[f("div",Lt,[e(q,{ref_key:"formRef",ref:A,model:n,rules:R,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:o[6]||(o[6]=m=>k(se)(A.value,M))},{default:i(()=>[f("div",Xt,[f("div",Zt,[e(T,{label:"No Projek"},{default:i(()=>{var m;return[e(d,{value:p.editMode?(m=s.formData)==null?void 0:m.worklist_number:"",disabled:""},null,8,["value"])]}),_:1}),e(T,{label:"Customer",name:"customer_id",ref:"customer_id"},{default:i(()=>{var m;return[e(Ne,{"column-defs":b,"grid-data":((m=x.value)==null?void 0:m.customers)??[],loading:k(O),value:void 0,"value-display":t.value,onChange:o[0]||(o[0]=E=>{E.id!==n.customer_id&&(n.customer_unit_id=void 0,u.value=""),n.customer_id=E.id,t.value=`${E.code} - ${E.name}`,W()})},null,8,["grid-data","loading","value-display"])]}),_:1},512),e(T,{label:"Unit",name:"customer_unit_id",ref:"customer_unit_id"},{default:i(()=>[e(Ne,{"column-defs":$,"grid-data":l.value??[],loading:l.value===null,value:void 0,"value-display":u.value,disabled:!n.customer_id,onChange:o[1]||(o[1]=m=>{n.customer_unit_id=m.id,u.value=`${m.code} - ${m.name}`})},null,8,["grid-data","loading","value-display","disabled"])]),_:1},512),e(T,{label:"Tgl Projek",name:"worklist_date",ref:"worklist_date"},{default:i(()=>[e(I,{value:n.worklist_date?k(te)(n.worklist_date):void 0,onChange:o[2]||(o[2]=(m,E)=>n.worklist_date=E)},null,8,["value"])]),_:1},512),e(T,{label:"Judul",name:"title",ref:"title"},{default:i(()=>[e(d,{value:n.title,"onUpdate:value":o[3]||(o[3]=m=>n.title=m)},null,8,["value"])]),_:1},512),e(T,{label:"Jenis Projek",name:"type_id",ref:"type_id"},{default:i(()=>[e(c,{value:n.type_id,"onUpdate:value":o[4]||(o[4]=m=>n.type_id=m)},{default:i(()=>{var m;return[(j(!0),U(Ke,null,Ee((m=x.value)==null?void 0:m.types,E=>(j(),ce(Q,{value:E.id},{default:i(()=>[B(V(E.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),e(T,{label:"Keterangan",name:"note",ref:"note"},{default:i(()=>[e(D,{value:n.note,"onUpdate:value":o[5]||(o[5]=m=>n.note=m)},null,8,["value"])]),_:1},512),e(_,{type:"primary","html-type":"submit",loading:k(L)},{default:i(()=>[ea,f("span",null,V(p.editMode?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(_,{class:"mx-3",onClick:J},{default:i(()=>[B(V(p.editMode?"Batal Edit":"Bersihkan"),1)]),_:1})])])]),_:1},8,["model"])])]),_:1}),e(w,{disabled:!p.editMode,key:"2",tab:"Pekerja"},{default:i(()=>{var m;return[e(ft,{worklist_id:(m=p.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!p.editMode,key:"3",tab:"Produk & Material"},{default:i(()=>{var m;return[e(bt,{worklist_id:(m=p.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!p.editMode,key:"4",tab:"Biaya Operasional"},{default:i(()=>{var m;return[e(Et,{worklist_id:(m=p.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!p.editMode,key:"5",tab:"PR"},{default:i(()=>{var m;return[e(Nt,{worklist_id:(m=p.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!p.editMode,key:"6",tab:"PO"},{default:i(()=>{var m;return[e(At,{worklist_id:(m=p.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!p.editMode,key:"7",tab:"Progress"},{default:i(()=>{var m;return[e(zt,{worklist_id:(m=p.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"])]),_:1},8,["activeKey"]))])}}}),aa=ie({__name:"DataTable",props:{idx:null},emits:["rowClick"],setup(p,{emit:a}){const s=p,b=z({value:[{field:"worklist_number",headerName:"No Projek",width:120,flex:0,pinned:"left"},{field:"title",headerName:"Judul",width:150,flex:0,autoHeight:!0,wrapText:!0},{field:"worklist_date_caption",headerName:"Tgl Projek",width:150,flex:0},{field:"customer.name",headerName:"Customer",width:150,flex:0},{field:"customer_unit.name",headerName:"Customer Unit",width:150,flex:0},{field:"type_caption",headerName:"Jenis Projek",width:110,flex:0},{field:"status_caption",headerName:"Status",width:150,flex:0},{field:"note",headerName:"Keterangan",width:150,flex:0},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}]}),$=z({value:null}),{run:h,response:C,loading:t}=H();async function u(){var l;try{await h(ve.list()),(l=C.value)!=null&&l.success&&($.value=C.value.data)}catch{}}function x(l){a("rowClick",l)}return ne(()=>{u()}),Ge(()=>s.idx,()=>{u()}),(l,A)=>(j(),U("div",null,[e(ke,{"row-data":$.value,"column-defs":b.value,loading:k(t),onRowClick:x},null,8,["row-data","column-defs","loading"])]))}}),sa=f("span",null,[f("i",{class:"fe fe-edit-2 me-2"}),B(" Input ")],-1),ia=f("span",null,[f("i",{class:"fe fe-search me-2"}),B(" Browse ")],-1),ra=f("i",{class:"fe fe-refresh-cw me-2"},null,-1),Ha=ie({__name:"index",setup(p){const a=g("1"),s=g(),b=g(!1),$=g(1);function h(u){a.value="1",s.value={...u},b.value=!0}function C(){b.value=!1}function t(u){$.value+=1,u!==void 0&&(b.value=u)}return(u,x)=>{const l=Je,A=oe,n=Ye;return j(),U("div",null,[e(n,{class:"input-browse-tab",activeKey:a.value,"onUpdate:activeKey":x[1]||(x[1]=R=>a.value=R),animated:""},ot({default:i(()=>[e(l,{key:"1"},{tab:i(()=>[sa]),default:i(()=>[e(ta,{"form-data":s.value,"edit-mode":b.value,onCancelEdit:C,onOnSuccess:t},null,8,["form-data","edit-mode"])]),_:1}),e(l,{key:"2"},{tab:i(()=>[ia]),default:i(()=>[e(aa,{idx:$.value,onRowClick:h},null,8,["idx"])]),_:1})]),_:2},[a.value==="2"?{name:"rightExtra",fn:i(()=>[e(A,{size:"small",class:"mt-3",onClick:x[0]||(x[0]=R=>$.value+=1)},{default:i(()=>[ra,B(" Refresh Data ")]),_:1})]),key:"0"}:void 0]),1032,["activeKey"])])}}});export{Ha as default};
