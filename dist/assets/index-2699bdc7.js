var ee=Object.defineProperty;var ae=(d,s,i)=>s in d?ee(d,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[s]=i;var V=(d,s,i)=>(ae(d,typeof s!="symbol"?s+"":s,i),i);import{B as J}from"./index-153eefc2.js";import{_ as te}from"./AgGrid.vuevuetypescriptsetuptruelang-ab13ecb9.js";import{o as ie,a as G}from"./index-8f77c718.js";import"./index-516ff1a6.js";/* empty css              *//* empty css              */import{_ as ne,S as le}from"./index-6857fb4e.js";import{_ as se}from"./InputDropdown.vuevuetypescriptsetuptruelang-59e1ec1d.js";import{a as B,I as de,_ as re,F as oe}from"./Input-bda0940e.js";import{H as ue,u as I}from"./HttpClient-7fc79ba3.js";import{d as R,r as x,O as U,w as Q,a as W,e as v,a7 as C,ac as u,f as S,g as l,a9 as y,c as t,u as w,F as A,ab as z,aa as $,ak as _e}from"./plugin-vueexport-helper-0ef99882.js";import{_ as me}from"./index-0437c30a.js";import{_ as fe}from"./TextArea-17c42df7.js";import{D as pe}from"./dayjs-ec520615.js";import{T as ce,_ as ge}from"./TabPane-9c8435b0.js";import"./pickAttrs-596f35c3.js";import"./useMemo-49158cc8.js";import"./DownOutlined-80526c88.js";import"./CheckOutlined-94b1a800.js";import"./SearchOutlined-1764655a.js";class T{static list(){return this.HttpClient.axiosInstance.get("/staffs")}static create(s){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Staff berhasil ditambah"}).axiosInstance.post("/staffs",s)}static update(s,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Staff berhasil diupdate"}).axiosInstance.put(`/staffs/${s}`,i)}static formOptions(){return this.HttpClient.axiosInstance.get("/staffs/form_options")}}V(T,"HttpClient",new ue);const ve={class:"card card-custom card-dense"},he={class:"card-header"},be={class:"card-title w-100 d-flex justify-content-between"},ye=u("h4",{class:"card-label"},"Form Pegawai",-1),we={class:"card-body"},xe={class:"row"},De={class:"col-lg-6"},ke=u("i",{class:"fe fe-save me-2"},null,-1),Ne=R({__name:"Form",props:{formData:null,editMode:{type:Boolean}},emits:["cancelEdit","onSuccess"],setup(d,{emit:s}){const i=d,h=[{field:"code",headerName:"Kode Departemen"},{field:"name",headerName:"Nama Departemen"}],m=x(""),b=x(),c=x(),e=U({}),f={employee_id_number:[{required:!0,message:"Nomor induk pegawai wajib diisi",trigger:"change"}],full_name:[{required:!0,message:"Nama pegawai wajib diisi",trigger:"change"}],departement_id:[{required:!0,message:"Departemen wajib dipilih",trigger:"change"}],sex_id:[{required:!0,message:"Jenis kelamin wajib dipilih",trigger:"change"}],status_id:[{required:!0,message:"Status pegawai wajib dipilih",trigger:"change"}],date_of_birth:[{type:"date",message:"Tgl lahir tidak valid",trigger:"change"}],entry_date:[{type:"date",message:"Tgl masuk tidak valid",trigger:"change"}],resign_date:[{type:"date",message:"Tgl resign tidak valid",trigger:"change"}],email:[{type:"email",message:"Email tidak valid",trigger:"change"}]},{run:g,loading:p,response:D}=I(),{run:F,loading:M,response:j}=I();async function X(){var o,a,k;try{i.editMode?await g(T.update((o=i.formData)==null?void 0:o.id,{departement_id:e.departement_id,full_name:e.full_name,sex_id:e.sex_id,status_id:e.status_id,address:e.address,date_of_birth:e.date_of_birth,description:e.description,email:e.email,entry_date:e.entry_date,place_of_birth:e.place_of_birth,resign_date:e.resign_date})):(await g(T.create({employee_id_number:e.employee_id_number.toUpperCase(),departement_id:e.departement_id,full_name:e.full_name,sex_id:e.sex_id,status_id:e.status_id,address:e.address,date_of_birth:e.date_of_birth,description:e.description,email:e.email,entry_date:e.entry_date,place_of_birth:e.place_of_birth,resign_date:e.resign_date})),(a=D.value)!=null&&a.success&&H()),(k=D.value)!=null&&k.success&&s("onSuccess")}catch{}}function H(){var o;if(i.editMode){for(const a in e)e[a]=void 0;s("cancelEdit")}else(o=c.value)==null||o.resetFields();m.value=""}function O(o,a){e[a]=o}return Q(()=>i.formData,()=>{var o;i.formData&&((o=c.value)==null||o.clearValidate(),e.employee_id_number=i.formData.employee_id_number,e.departement_id=i.formData.departement.id,e.address=i.formData.address,e.date_of_birth=i.formData.date_of_birth,e.description=i.formData.description,e.email=i.formData.email,e.entry_date=i.formData.entry_date,e.full_name=i.formData.full_name,e.place_of_birth=i.formData.place_of_birth,e.resign_date=i.formData.resign_date,e.sex_id=i.formData.sex_id,e.status_id=i.formData.status_id,m.value=`${i.formData.departement.code} - ${i.formData.departement.name}`)}),W(async()=>{var o;try{await F(T.formOptions()),(o=j.value)!=null&&o.success&&(b.value=j.value.data)}catch{}}),(o,a)=>{const k=me,N=de,_=re,Y=se,q=le,K=ne,L=fe,E=pe,P=J,Z=oe;return v(),C("div",ve,[u("div",he,[u("div",be,[ye,d.editMode?(v(),S(k,{key:0,color:"orange"},{default:l(()=>[y("Mode Edit")]),_:1})):(v(),S(k,{key:1,color:"cyan"},{default:l(()=>[y("Mode Input")]),_:1}))])]),u("div",we,[t(Z,{ref_key:"formRef",ref:c,model:e,rules:f,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:a[12]||(a[12]=n=>w(ie)(c.value,X))},{default:l(()=>[u("div",xe,[u("div",De,[t(_,{label:"NIP",name:"employee_id_number",ref:"employee_id_number"},{default:l(()=>[t(N,{value:e.employee_id_number,"onUpdate:value":a[0]||(a[0]=n=>e.employee_id_number=n),valueModifiers:{trim:!0},style:{"text-transform":"uppercase"},disabled:d.editMode},null,8,["value","disabled"])]),_:1},512),t(_,{label:"Nama Pegawai",name:"full_name",ref:"full_name"},{default:l(()=>[t(N,{value:e.full_name,"onUpdate:value":a[1]||(a[1]=n=>e.full_name=n)},null,8,["value"])]),_:1},512),t(_,{label:"Departemen",name:"departement_id",ref:"departement_id"},{default:l(()=>{var n;return[t(Y,{"column-defs":h,"grid-data":((n=b.value)==null?void 0:n.departements)??[],loading:w(M),value:void 0,"value-display":m.value,onChange:a[2]||(a[2]=r=>{e.departement_id=r.id,m.value=`${r.code} - ${r.name}`})},null,8,["grid-data","loading","value-display"])]}),_:1},512),t(_,{label:"Gender",name:"sex_id",ref:"sex_id"},{default:l(()=>[t(K,{value:e.sex_id,"onUpdate:value":a[3]||(a[3]=n=>e.sex_id=n)},{default:l(()=>{var n;return[(v(!0),C(A,null,z((n=b.value)==null?void 0:n.sexs,r=>(v(),S(q,{value:r.id},{default:l(()=>[y($(r.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),t(_,{label:"Status",name:"status_id",ref:"status_id"},{default:l(()=>[t(K,{value:e.status_id,"onUpdate:value":a[4]||(a[4]=n=>e.status_id=n)},{default:l(()=>{var n;return[(v(!0),C(A,null,z((n=b.value)==null?void 0:n.statuses,r=>(v(),S(q,{value:r.id},{default:l(()=>[y($(r.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),t(_,{label:"Alamat Tinggal",name:"address",ref:"address"},{default:l(()=>[t(L,{value:e.address,"onUpdate:value":a[5]||(a[5]=n=>e.address=n)},null,8,["value"])]),_:1},512),t(_,{label:"Tgl Masuk",name:"entry_date",ref:"entry_date"},{default:l(()=>[t(E,{value:e.entry_date?w(B)(e.entry_date):void 0,onChange:a[6]||(a[6]=(n,r)=>O(r,"entry_date"))},null,8,["value"])]),_:1},512),t(_,{label:"Tgl Resign",name:"resign_date",ref:"resign_date"},{default:l(()=>[t(E,{value:e.resign_date?w(B)(e.resign_date):void 0,onChange:a[7]||(a[7]=(n,r)=>O(r,"resign_date"))},null,8,["value"])]),_:1},512),t(_,{label:"Tgl Lahir",name:"date_of_birth",ref:"date_of_birth"},{default:l(()=>[t(E,{value:e.date_of_birth?w(B)(e.date_of_birth):void 0,onChange:a[8]||(a[8]=(n,r)=>O(r,"date_of_birth"))},null,8,["value"])]),_:1},512),t(_,{label:"Tempat Lahir",name:"place_of_birth",ref:"place_of_birth"},{default:l(()=>[t(N,{value:e.place_of_birth,"onUpdate:value":a[9]||(a[9]=n=>e.place_of_birth=n)},null,8,["value"])]),_:1},512),t(_,{label:"Email",name:"email",ref:"email"},{default:l(()=>[t(N,{value:e.email,"onUpdate:value":a[10]||(a[10]=n=>e.email=n)},null,8,["value"])]),_:1},512),t(_,{label:"Deskripsi",name:"description",ref:"description"},{default:l(()=>[t(L,{value:e.description,"onUpdate:value":a[11]||(a[11]=n=>e.description=n)},null,8,["value"])]),_:1},512),t(P,{type:"primary","html-type":"submit",loading:w(p)},{default:l(()=>[ke,u("span",null,$(d.editMode?"Edit":"Simpan"),1)]),_:1},8,["loading"]),t(P,{class:"mx-3",onClick:H},{default:l(()=>[y($(d.editMode?"Batal Edit":"Bersihkan"),1)]),_:1})])])]),_:1},8,["model"])])])}}}),Ce=R({__name:"DataTable",props:{idx:null},emits:["rowClick"],setup(d,{emit:s}){const i=d,h=U({value:[{field:"employee_id_number",headerName:"NIP",flex:0,width:120,pinned:"left"},{field:"full_name",headerName:"Nama",flex:0,width:150,pinned:"left"},{field:"departement.name",headerName:"Departemen",flex:0,width:120},{field:"email",headerName:"Email",flex:0,width:120},{field:"sex_caption",headerName:"Gender",flex:0,width:90},{field:"address",headerName:"Alamat Tinggal",flex:0,width:140},{field:"status_caption",headerName:"Status",flex:0,width:80},{field:"entry_date_caption",headerName:"Tgl Masuk",flex:0,width:150},{field:"resign_date_caption",headerName:"Tgl Resign",flex:0,width:150},{field:"place_of_birth",headerName:"Tpt Lahir",flex:0,width:100},{field:"date_of_birth_caption",headerName:"Tgl Lahir",flex:0,width:120},{field:"description",headerName:"Deskripsi",flex:0,width:100},{field:"created_at",headerName:"Diinput Tgl",...G},{field:"updated_at",headerName:"Diupdate Tgl",...G},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}]}),m=U({value:null}),{run:b,response:c,loading:e}=I();async function f(){var p;try{await b(T.list()),(p=c.value)!=null&&p.success&&(m.value=c.value.data)}catch{}}function g(p){s("rowClick",p)}return W(()=>{f()}),Q(()=>i.idx,()=>{f()}),(p,D)=>(v(),C("div",null,[t(te,{"row-data":m.value,"column-defs":h.value,loading:w(e),onRowClick:g},null,8,["row-data","column-defs","loading"])]))}}),Te=u("span",null,[u("i",{class:"fe fe-edit-2 me-2"}),y(" Input ")],-1),Me=u("span",null,[u("i",{class:"fe fe-search me-2"}),y(" Browse ")],-1),Se=u("i",{class:"fe fe-refresh-cw me-2"},null,-1),Xe=R({__name:"index",setup(d){const s=x("1"),i=x(),h=x(!1),m=x(1);function b(f){s.value="1",i.value={...f},h.value=!0}function c(){h.value=!1}function e(f){m.value+=1,f!==void 0&&(h.value=f)}return(f,g)=>{const p=ge,D=J,F=ce;return v(),C("div",null,[t(F,{class:"input-browse-tab",activeKey:s.value,"onUpdate:activeKey":g[1]||(g[1]=M=>s.value=M),animated:""},_e({default:l(()=>[t(p,{key:"1"},{tab:l(()=>[Te]),default:l(()=>[t(Ne,{"form-data":i.value,"edit-mode":h.value,onCancelEdit:c,onOnSuccess:e},null,8,["form-data","edit-mode"])]),_:1}),t(p,{key:"2"},{tab:l(()=>[Me]),default:l(()=>[t(Ce,{idx:m.value,onRowClick:b},null,8,["idx"])]),_:1})]),_:2},[s.value==="2"?{name:"rightExtra",fn:l(()=>[t(D,{size:"small",class:"mt-3",onClick:g[0]||(g[0]=M=>m.value+=1)},{default:l(()=>[Se,y(" Refresh Data ")]),_:1})]),key:"0"}:void 0]),1032,["activeKey"])])}}});export{Xe as default};
