var at=Object.defineProperty;var st=(f,a,i)=>a in f?at(f,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[a]=i;var de=(f,a,i)=>(st(f,typeof a!="symbol"?a+"":a,i),i);import{B as re,k as Ue}from"./index-00a8ffd2.js";/* empty css              *//* empty css              */import"./index-97222043.js";/* empty css              */import{S as Oe,_ as Pe}from"./index-0523e8d4.js";/* empty css              *//* empty css              */import{a as te}from"./dayjs.min-2389bdff.js";import{H as ve,u as H}from"./HttpClient-64290c27.js";import{o as se,r as qe,a as Y,b as Ie,t as Ae}from"./index-f9e6a35e.js";import{_ as Ne}from"./InputDropdown.vue_vue_type_script_setup_true_lang-55961ea3.js";import{W as be}from"./WorklistService-e31b0b50.js";import{u as it}from"./modal-e4c7fed2.js";import{_ as Se}from"./index-e9d8f074.js";import{_ as he}from"./AgGrid.vue_vue_type_script_setup_true_lang-d3dbb188.js";import{d as ie,O as z,r as k,a as oe,e as S,a7 as U,c as e,u as g,ac as p,aa as W,g as s,a9 as I,f as ce,ae as Ce,X as rt,F as Ke,ab as Ee,w as Ge,ak as ot}from"./_plugin-vue_export-helper-50c92bea.js";import{M as $e}from"./Modal-5bd2bcee.js";import{_ as _e,F as me}from"./Form-2caee2e0.js";import{D as ge}from"./dayjs-3e6b4e4c.js";import{_ as Me}from"./TextArea-afcadf10.js";/* empty css              */import{_ as We}from"./UploadImage-a4eaa2ac.js";import{S as Ve}from"./Spin-04bb4af3.js";import{I as je}from"./Input-97482d20.js";import{_ as Je,T as Ye}from"./TabPane-053c7c75.js";import"./pickAttrs-44b65975.js";import"./useMemo-6199d1b3.js";import"./useRefs-9f478e5b.js";import"./DownOutlined-dca0ecad.js";import"./CheckOutlined-e3d2d87e.js";import"./SearchOutlined-123fd7b0.js";import"./_flatRest-6ef3b5aa.js";import"./isSymbol-5a6ec0b4.js";import"./debounce-52dc8683.js";import"./index-f9be8515.js";/* empty css              *//* empty css              */import"./index-e7cb42f1.js";import"./EyeOutlined-369659f4.js";import"./index-12527e99.js";import"./index-22e2e4e6.js";class ae{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_workers`)}static create(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Pekerja berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_workers`,i)}static update(a,i,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Pekerja berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_workers/${i}`,b)}static delete(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Pekerja berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_workers/${i}`)}static formOptions(){return this.HttpClient.axiosInstance.get("/worklists/current/worklist_workers/form_options")}static listAttendances(a,i){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_workers/${i}/worklist_worker_attendances`)}static createAttendances(a,i,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Absensi berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_workers/${i}/worklist_worker_attendances`,b)}static updateAttendances(a,i,b,$){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Absensi berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_workers/${i}/worklist_worker_attendances/${b}`,$)}}de(ae,"HttpClient",new ve);const nt={class:"card m-2 p-4"},lt={class:"mb-4"},ut={class:"row"},dt={class:"col-lg-6"},ct=p("i",{class:"fe fe-save me-2"},null,-1),_t={key:0,class:"card m-2 p-4"},mt={class:"d-flex justify-content-between mb-4"},pt=p("h5",{class:"m-0"},"Absensi",-1),ft=ie({__name:"PekerjaTab",props:{worklist_id:null},setup(f){const a=f,i=[{field:"worker.code",headerName:"Kode Pekerja",minWidth:120},{field:"worker.name",headerName:"Nama Pekerja",minWidth:120},{field:"salary",headerName:"Gaji",filter:"agNumberColumnFilter",type:"numericColumn",minWidth:120,valueGetter:v=>parseFloat(v.data.salary),valueFormatter:v=>qe(v.value)},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=[{field:"checkin_timestamp",headerName:"Tgl Check In",...Ie},{field:"checkout_timestamp",headerName:"Tgl Check Out",...Ie},{field:"working_hours",headerName:"Jam Kerja",filter:"agNumberColumnFilter",type:"numericColumn",width:150,flex:0,valueGetter:v=>parseFloat(v.data.working_hours).toPrecision(2)},{field:"salary_attendance",headerName:"Gaji",filter:"agNumberColumnFilter",type:"numericColumn",width:150,flex:0,valueGetter:v=>parseFloat(v.data.salary_attendance),valueFormatter:v=>qe(v.value)},{field:"extratime_working_hours",headerName:"Lembur (Jam)",filter:"agNumberColumnFilter",type:"numericColumn",width:150,flex:0,valueGetter:v=>parseFloat(v.data.extratime_working_hours).toPrecision(2)},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],$=[{field:"code",headerName:"Kode Pekerja"},{field:"name",headerName:"Nama Pekerja"}],h=z({value:null}),C=z({value:null}),t=k(!1),u=k(!1),x=k(),l=k(),M=k(),n=k(""),R=k(),j=z({}),L={worker_id:[{required:!0,message:"Pekerja wajib dipilih",trigger:"change"}],salary:[{required:!0,message:"Gaji wajib diisi",trigger:"change"}]},K=k(),N=z({}),O={checkin_timestamp:[{required:!0,message:"Waktu check-in wajib diisi",trigger:"change"}],checkout_timestamp:[{required:!0,message:"Waktu check-out wajib diisi",trigger:"change"}]},{run:r,response:A,loading:J}=H(),{run:V,response:F,loading:o}=H(),{run:d,response:T,loading:B}=H(),{run:Q,loading:c,response:D}=H(),{run:_,response:q,loading:w}=H(),{run:X,response:m,loading:E}=H(),{visible:ne,open:P,close:ee}=it();async function ze(){var v,y,Z;try{t.value?(await d(ae.update(a.worklist_id,(v=x.value)==null?void 0:v.id,{worker_id:j.worker_id,salary:j.salary})),(y=T.value)!=null&&y.success&&De()):(await d(ae.create(a.worklist_id,{workers:[{worker_id:j.worker_id,salary:j.salary}]})),(Z=T.value)!=null&&Z.success&&(Te(),De()))}catch{}}async function De(){var v;try{await r(ae.list(a.worklist_id)),(v=A.value)!=null&&v.success&&(h.value=A.value.data)}catch{}}async function Qe(){var v;try{await V(ae.formOptions()),(v=F.value)!=null&&v.success&&(M.value=F.value.data)}catch{}}function Te(){var v;if(t.value)for(const y in j)j[y]=void 0;else(v=R.value)==null||v.resetFields();n.value="",t.value=!1,x.value=void 0}function Le(v){var y;(y=R.value)==null||y.clearValidate(),j.worker_id=v.worker.id,j.salary=parseInt(v.salary,10),n.value=`${v.worker.code} - ${v.worker.name}`,t.value=!0,x.value=v,Re(v.id)}async function Xe(){var v,y;try{await Q(ae.delete(a.worklist_id,(v=x.value)==null?void 0:v.id)),(y=D.value)!=null&&y.success&&(Te(),De())}catch{}}function Ze(){$e.confirm({title:"Konfirmasi Hapus Pekerja",content:"Apakah kamu sudah yakin ingin menghapus data "+n.value+" ?",cancelText:"Batal",onOk:Xe})}async function Re(v){var y;try{await _(ae.listAttendances(a.worklist_id,v)),(y=q.value)!=null&&y.success&&(C.value=q.value.data)}catch{}}async function Be(){var v,y,Z,ke,le,we;try{u.value?(await X(ae.updateAttendances(a.worklist_id,(v=x.value)==null?void 0:v.id,(y=l.value)==null?void 0:y.id,{checkin_timestamp:N.checkin_timestamp+" +0700",checkout_timestamp:N.checkout_timestamp+" +0700"})),ee()):await X(ae.createAttendances(a.worklist_id,(Z=x.value)==null?void 0:Z.id,{checkin_timestamp:N.checkin_timestamp+" +0700",checkout_timestamp:N.checkout_timestamp+" +0700"})),(ke=m.value)!=null&&ke.success&&((le=K.value)==null||le.resetFields(),Re((we=x.value)==null?void 0:we.id))}catch{}}function et(v){u.value=!0,l.value=v,N.checkin_timestamp=te(l.value.checkin_timestamp).format("YYYY-MM-DD HH:mm:ss"),N.checkout_timestamp=te(l.value.checkout_timestamp).format("YYYY-MM-DD HH:mm:ss"),P()}return oe(()=>{De(),Qe()}),(v,y)=>{const Z=_e,ke=Se,le=re,we=me,He=ge,tt=$e;return S(),U("div",null,[e(he,{style:{height:"250px"},"row-data":h.value,"column-defs":i,loading:g(J),onRowClick:Le},null,8,["row-data","column-defs","loading"]),p("div",nt,[p("h5",lt,W(t.value?"Update":"Tambah")+" Pekerja",1),e(we,{ref_key:"formRef",ref:R,model:j,rules:L,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:y[2]||(y[2]=G=>g(se)(R.value,ze))},{default:s(()=>[p("div",ut,[p("div",dt,[e(Z,{label:"Pekerja",name:"worker_id",ref:"worker_id"},{default:s(()=>{var G;return[e(Ne,{"column-defs":$,"grid-data":((G=M.value)==null?void 0:G.workers)??[],loading:g(o),value:void 0,"value-display":n.value,onChange:y[0]||(y[0]=ue=>{j.worker_id=ue.id,n.value=`${ue.code} - ${ue.name}`})},null,8,["grid-data","loading","value-display"])]}),_:1},512),e(Z,{label:"Gaji",name:"salary",ref:"salary"},{default:s(()=>[e(ke,{value:j.salary,"onUpdate:value":y[1]||(y[1]=G=>j.salary=G),min:0,formatter:G=>`${G}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:G=>G.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(le,{type:"primary","html-type":"submit",loading:g(B)},{default:s(()=>[ct,p("span",null,W(t.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(le,{class:"mx-3",onClick:Te},{default:s(()=>[I(W(t.value?"Batal Edit":"Bersihkan"),1)]),_:1}),t.value?(S(),ce(le,{key:0,danger:"",type:"primary",onClick:Ze,loading:g(c)},{default:s(()=>[I(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])]),x.value?(S(),U("div",_t,[p("div",mt,[pt,e(le,{type:"primary",onClick:y[3]||(y[3]=()=>{var G;u.value=!1,N.checkin_timestamp=void 0,N.checkout_timestamp=void 0,(G=K.value)==null||G.clearValidate(),g(P)()})},{default:s(()=>[I(" Tambah ")]),_:1})]),e(he,{style:{height:"250px"},"row-data":C.value,"column-defs":b,loading:g(w),onRowClick:et},null,8,["row-data","column-defs","loading"])])):Ce("",!0),e(tt,{visible:g(ne),"onUpdate:visible":y[7]||(y[7]=G=>rt(ne)?ne.value=G:null),title:u.value?"Update Absensi":"Tambah Absensi","cancel-text":"Tutup",onOk:y[8]||(y[8]=G=>g(se)(K.value,Be))},{default:s(()=>[e(we,{ref_key:"formRefAttendance",ref:K,model:N,rules:O,"label-col":{style:{width:"110px"}},colon:!1,"label-align":"left",onFinish:y[6]||(y[6]=G=>g(se)(K.value,Be))},{default:s(()=>[e(Z,{label:"Check In",ref:"checkin_timestamp",name:"checkin_timestamp"},{default:s(()=>[e(He,{"show-time":"",value:N.checkin_timestamp?g(te)(N.checkin_timestamp):void 0,onChange:y[4]||(y[4]=(G,ue)=>N.checkin_timestamp=ue)},null,8,["value"])]),_:1},512),e(Z,{label:"Check Out",ref:"checkin_timestamp",name:"checkin_timestamp"},{default:s(()=>[e(He,{"show-time":"",value:N.checkout_timestamp?g(te)(N.checkout_timestamp):void 0,onChange:y[5]||(y[5]=(G,ue)=>N.checkout_timestamp=ue)},null,8,["value"])]),_:1},512)]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});class pe{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_products`)}static create(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_products`,i)}static update(a,i,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_products/${i}`,b)}static delete(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_products/${i}`)}static formOptions(){return this.HttpClient.axiosInstance.get("/worklists/current/worklist_products/form_options")}}de(pe,"HttpClient",new ve);const ht={class:"m-2 p-4 card"},vt={class:"mb-4"},gt={class:"row"},kt={class:"col-lg-6"},wt=p("i",{class:"fe fe-save me-2"},null,-1),bt=ie({__name:"ProdukTab",props:{worklist_id:null},setup(f){const a=f,i=[{field:"product.code",headerName:"Kode Produk",minWidth:120},{field:"product.name",headerName:"Nama Produk",minWidth:120},{field:"qty_request",headerName:"Qty Request",filter:"agNumberColumnFilter",type:"numericColumn",minWidth:120,valueGetter:_=>parseFloat(_.data.qty_request),valueFormatter:_=>Ae(_.value)},{field:"qty_realization",headerName:"Qty Realisasi",filter:"agNumberColumnFilter",type:"numericColumn",minWidth:120,valueGetter:_=>_.data.qty_realization!==null?parseFloat(_.data.qty_realization):null,valueFormatter:_=>Ae(_.value)},{field:"note",headerName:"Keterangan",minWidth:120},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=[{field:"code",headerName:"Kode Produk"},{field:"name",headerName:"Nama Produk"}],$=z({value:null}),h=k(!1),C=k(),t=k(),u=k(""),x=k(),l=z({}),M={product_id:[{required:!0,message:"Pekerja wajib dipilih",trigger:"change"}],qty_request:[{required:!0,message:"Qty request wajib diisi",trigger:"change"}],note:[{required:!0,message:"Catatan wajib diisi",trigger:"change"}]},{run:n,response:R,loading:j}=H(),{run:L,response:K,loading:N}=H(),{run:O,response:r,loading:A}=H(),{run:J,loading:V,response:F}=H();async function o(){var _,q,w;try{h.value?(await O(pe.update(a.worklist_id,(_=C.value)==null?void 0:_.id,{product_id:l.product_id,qty_request:l.qty_request,note:l.note})),(q=r.value)!=null&&q.success&&d()):(await O(pe.create(a.worklist_id,{products:[{product_id:l.product_id,qty_request:l.qty_request,note:l.note}]})),(w=r.value)!=null&&w.success&&(B(),d()))}catch{}}async function d(){var _;try{await n(pe.list(a.worklist_id)),(_=R.value)!=null&&_.success&&($.value=R.value.data)}catch{}}async function T(){var _;try{await L(pe.formOptions()),(_=K.value)!=null&&_.success&&(t.value=K.value.data)}catch{}}function B(){var _;if(h)for(const q in l)l[q]=void 0;else(_=x.value)==null||_.resetFields();u.value="",h.value=!1,C.value=void 0}function Q(_){var q;(q=x.value)==null||q.clearValidate(),l.product_id=_.product.id,l.qty_request=parseInt(_.qty_request,10),l.note=_.note,u.value=`${_.product.code} - ${_.product.name}`,h.value=!0,C.value=_}async function c(){var _,q;try{await J(pe.delete(a.worklist_id,(_=C.value)==null?void 0:_.id)),(q=F.value)!=null&&q.success&&(B(),d())}catch{}}function D(){$e.confirm({title:"Konfirmasi Hapus Pekerja",content:"Apakah kamu sudah yakin ingin menghapus data "+u.value+" ?",cancelText:"Batal",onOk:c})}return oe(()=>{d(),T()}),(_,q)=>{const w=_e,X=Se,m=Me,E=re,ne=me;return S(),U("div",null,[e(he,{style:{height:"250px"},"row-data":$.value,"column-defs":i,loading:g(j),onRowClick:Q},null,8,["row-data","column-defs","loading"]),p("div",ht,[p("h5",vt,W(h.value?"Update":"Tambah")+" Produk",1),e(ne,{ref_key:"formRef",ref:x,model:l,rules:M,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:q[3]||(q[3]=P=>g(se)(x.value,o))},{default:s(()=>[p("div",gt,[p("div",kt,[e(w,{label:"Produk",name:"product_id",ref:"product_id"},{default:s(()=>{var P;return[e(Ne,{"column-defs":b,"grid-data":((P=t.value)==null?void 0:P.products)??[],loading:g(N),value:void 0,"value-display":u.value,onChange:q[0]||(q[0]=ee=>{l.product_id=ee.id,u.value=`${ee.code} - ${ee.name}`})},null,8,["grid-data","loading","value-display"])]}),_:1},512),e(w,{label:"Qty",name:"qty_request",ref:"qty_request"},{default:s(()=>[e(X,{value:l.qty_request,"onUpdate:value":q[1]||(q[1]=P=>l.qty_request=P),min:0,formatter:P=>`${P}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:P=>P.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(w,{label:"Catatan",name:"note",ref:"note"},{default:s(()=>[e(m,{value:l.note,"onUpdate:value":q[2]||(q[2]=P=>l.note=P)},null,8,["value"])]),_:1},512),e(E,{type:"primary","html-type":"submit",loading:g(A)},{default:s(()=>[wt,p("span",null,W(h.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(E,{class:"mx-3",onClick:B},{default:s(()=>[I(W(h.value?"Batal Edit":"Bersihkan"),1)]),_:1}),h.value?(S(),ce(E,{key:0,danger:"",type:"primary",onClick:D,loading:g(V)},{default:s(()=>[I(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])])])}}});class xe{static show(a){return this.HttpClient.withOptions({showSuccessFeedback:!1,showErrorFeedback:!1}).axiosInstance.get(`/worklists/${a}/worklist_purchase_requisition`)}static create(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PR berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_purchase_requisition`,i)}static update(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PR berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_purchase_requisition`,i)}}de(xe,"HttpClient",new ve);const yt={key:0,class:"p-4 text-center"},Ct={key:1,class:"p-4"},$t={key:0,class:"text-center"},Dt={key:1},xt={class:"row"},Ft={class:"col-lg-6"},qt=p("i",{class:"fe fe-save me-2"},null,-1),Nt=ie({__name:"PrTab",props:{worklist_id:null},setup(f){const a=f,i=k(!1),b=k(!1),$=k(!1),h=k(""),C=k(),t=z({}),u={purchase_requisition_number:[{required:!0,message:"No PR wajib diisi",trigger:"change"}],status_id:[{required:!0,message:"Status wajib dipilih",trigger:"change"}],purchase_requisition_date:[{required:!0,message:"Tgl PR wajib diisi",trigger:"change"}],attachment:[{required:!0,message:"Dokumen PR wajib diupload",trigger:"change"}]},{run:x,response:l,loading:M}=H(),{run:n,response:R,loading:j}=H();async function L(){var O;try{if(i.value){const r=new FormData;r.set("purchase_requisition_number",t.purchase_requisition_number),r.set("purchase_requisition_date",t.purchase_requisition_date),r.set("status_id",t.status_id.toString()),t.attachment!==h.value&&r.set("attachment",t.attachment),await n(xe.update(a.worklist_id,r))}else{const r=new FormData;r.set("purchase_requisition_number",t.purchase_requisition_number),r.set("purchase_requisition_date",t.purchase_requisition_date),r.set("status_id",t.status_id.toString()),r.set("attachment",t.attachment),await n(xe.create(a.worklist_id,r)),(O=R.value)!=null&&O.success&&(i.value=!0,b.value=!1)}}catch{}}async function K(){var O,r;try{await x(xe.show(a.worklist_id)),(O=l.value)!=null&&O.success?(t.purchase_requisition_number=l.value.data.purchase_requisition_number,t.purchase_requisition_date=l.value.data.purchase_requisition_date,t.status_id=l.value.data.status_id,t.attachment=l.value.data.attachment_url,h.value=l.value.data.attachment_url,i.value=!0):((r=l.value)==null?void 0:r.status)===404&&(b.value=!0)}catch{}}function N(O,r){var A;h.value=O,t.attachment=r,(A=C.value)==null||A.validateFields("attachment")}return oe(()=>{K()}),(O,r)=>{const A=Ve,J=Ue,V=re,F=je,o=_e,d=Oe,T=Pe,B=ge,Q=me;return S(),U("div",null,[g(M)?(S(),U("div",yt,[e(A)])):(S(),U("div",Ct,[b.value&&!$.value?(S(),U("div",$t,[e(J,{description:"Belum ada PR"}),e(V,{type:"primary",onClick:r[0]||(r[0]=c=>$.value=!0)},{default:s(()=>[I(" Buat PR ")]),_:1})])):(S(),U("div",Dt,[e(Q,{ref_key:"formRef",ref:C,model:t,rules:u,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:r[4]||(r[4]=c=>g(se)(C.value,L))},{default:s(()=>[p("div",xt,[p("div",Ft,[e(o,{label:"No PR",ref:"purchase_requisition_number",name:"purchase_requisition_number"},{default:s(()=>[e(F,{value:t.purchase_requisition_number,"onUpdate:value":r[1]||(r[1]=c=>t.purchase_requisition_number=c)},null,8,["value"])]),_:1},512),e(o,{label:"Status",ref:"status_id",name:"status_id"},{default:s(()=>[e(T,{value:t.status_id,"onUpdate:value":r[2]||(r[2]=c=>t.status_id=c)},{default:s(()=>[e(d,{value:1},{default:s(()=>[I(" Aktif ")]),_:1}),e(d,{value:2},{default:s(()=>[I(" Batal ")]),_:1})]),_:1},8,["value"])]),_:1},512),e(o,{label:"Tgl PR",name:"purchase_requisition_date",ref:"purchase_requisition_date"},{default:s(()=>[e(B,{value:t.purchase_requisition_date?g(te)(t.purchase_requisition_date):void 0,onChange:r[3]||(r[3]=(c,D)=>t.purchase_requisition_date=D)},null,8,["value"])]),_:1},512),e(o,{label:"Attachment",ref:"attachment",name:"attachment"},{default:s(()=>[e(We,{"img-url":h.value,onChange:N},null,8,["img-url"])]),_:1},512),e(V,{type:"primary","html-type":"submit",loading:g(j)},{default:s(()=>[qt,p("span",null,W(i.value?"Edit":"Simpan"),1)]),_:1},8,["loading"])])])]),_:1},8,["model"])]))]))])}}});class Fe{static show(a){return this.HttpClient.withOptions({showSuccessFeedback:!1,showErrorFeedback:!1}).axiosInstance.get(`/worklists/${a}/worklist_purchase_order`)}static create(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PO berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_purchase_order`,i)}static update(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"PO berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_purchase_order`,i)}}de(Fe,"HttpClient",new ve);const Ot={key:0,class:"p-4 text-center"},Pt={key:1,class:"p-4"},St={key:0,class:"text-center"},jt={key:1},Tt={class:"row"},Ht={class:"col-lg-6"},At=p("i",{class:"fe fe-save me-2"},null,-1),Mt=ie({__name:"PoTab",props:{worklist_id:null},setup(f){const a=f,i=k(!1),b=k(!1),$=k(!1),h=k(""),C=k(),t=z({}),u={purchase_order_number:[{required:!0,message:"No PO wajib diisi",trigger:"change"}],status_id:[{required:!0,message:"Status wajib dipilih",trigger:"change"}],purchase_order_date:[{required:!0,message:"Tgl PO wajib diisi",trigger:"change"}],attachment:[{required:!0,message:"Dokumen PO wajib diupload",trigger:"change"}]},{run:x,response:l,loading:M}=H(),{run:n,response:R,loading:j}=H();async function L(){var O;try{if(i.value){const r=new FormData;r.set("purchase_order_number",t.purchase_order_number),r.set("purchase_order_date",t.purchase_order_date),r.set("status_id",t.status_id.toString()),t.attachment!==h.value&&r.set("attachment",t.attachment),await n(Fe.update(a.worklist_id,r))}else{const r=new FormData;r.set("purchase_order_number",t.purchase_order_number),r.set("purchase_order_date",t.purchase_order_date),r.set("status_id",t.status_id.toString()),r.set("attachment",t.attachment),await n(Fe.create(a.worklist_id,r)),(O=R.value)!=null&&O.success&&(i.value=!0,b.value=!1)}}catch{}}async function K(){var O,r;try{await x(Fe.show(a.worklist_id)),(O=l.value)!=null&&O.success?(t.purchase_order_number=l.value.data.purchase_order_number,t.purchase_order_date=l.value.data.purchase_order_date,t.status_id=l.value.data.status_id,t.attachment=l.value.data.attachment_url,h.value=l.value.data.attachment_url,i.value=!0):((r=l.value)==null?void 0:r.status)===404&&(b.value=!0)}catch{}}function N(O,r){var A;h.value=O,t.attachment=r,(A=C.value)==null||A.validateFields("attachment")}return oe(()=>{K()}),(O,r)=>{const A=Ve,J=Ue,V=re,F=je,o=_e,d=Oe,T=Pe,B=ge,Q=me;return S(),U("div",null,[g(M)?(S(),U("div",Ot,[e(A)])):(S(),U("div",Pt,[b.value&&!$.value?(S(),U("div",St,[e(J,{description:"Belum ada PO"}),e(V,{type:"primary",onClick:r[0]||(r[0]=c=>$.value=!0)},{default:s(()=>[I(" Buat PO ")]),_:1})])):(S(),U("div",jt,[e(Q,{ref_key:"formRef",ref:C,model:t,rules:u,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:r[4]||(r[4]=c=>g(se)(C.value,L))},{default:s(()=>[p("div",Tt,[p("div",Ht,[e(o,{label:"No PO",ref:"purchase_order_number",name:"purchase_order_number"},{default:s(()=>[e(F,{value:t.purchase_order_number,"onUpdate:value":r[1]||(r[1]=c=>t.purchase_order_number=c)},null,8,["value"])]),_:1},512),e(o,{label:"Status",ref:"status_id",name:"status_id"},{default:s(()=>[e(T,{value:t.status_id,"onUpdate:value":r[2]||(r[2]=c=>t.status_id=c)},{default:s(()=>[e(d,{value:1},{default:s(()=>[I(" Aktif ")]),_:1}),e(d,{value:2},{default:s(()=>[I(" Batal ")]),_:1})]),_:1},8,["value"])]),_:1},512),e(o,{label:"Tgl PO",name:"purchase_order_date",ref:"purchase_order_date"},{default:s(()=>[e(B,{value:t.purchase_order_date?g(te)(t.purchase_order_date):void 0,onChange:r[3]||(r[3]=(c,D)=>t.purchase_order_date=D)},null,8,["value"])]),_:1},512),e(o,{label:"Attachment",ref:"attachment",name:"attachment"},{default:s(()=>[e(We,{"img-url":h.value,onChange:N},null,8,["img-url"])]),_:1},512),e(V,{type:"primary","html-type":"submit",loading:g(j)},{default:s(()=>[At,p("span",null,W(i.value?"Edit":"Simpan"),1)]),_:1},8,["loading"])])])]),_:1},8,["model"])]))]))])}}});class ye{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_operational_fees`)}static create(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Biaya Operasional berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_operational_fees`,i)}static update(a,i,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Biaya Operasional berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_operational_fees/${i}`,b)}static delete(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Biaya Operasional berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_operational_fees/${i}`)}}de(ye,"HttpClient",new ve);const Rt={class:"m-2 p-4 card"},Bt={class:"mb-4"},It={class:"row"},Ut={class:"col-lg-6"},Kt=p("i",{class:"fe fe-save me-2"},null,-1),Et=ie({__name:"BiayaOperasionalTab",props:{worklist_id:null},setup(f){const a=f,i=[{field:"request_number",headerName:"No Tran",width:100,flex:0},{field:"date",headerName:"No Tran",...Y},{field:"petty_cash",headerName:"Petty Cash",filter:"agNumberColumnFilter",type:"numericColumn",valueGetter:o=>o.data.petty_cash?parseFloat(o.data.petty_cash):null,valueFormatter:o=>o.value?qe(o.value):""},{field:"price",headerName:"Harga",filter:"agNumberColumnFilter",type:"numericColumn",valueGetter:o=>parseFloat(o.data.price),valueFormatter:o=>qe(o.value)},{field:"transfered_at",headerName:"Transfer Tgl",...Y},{field:"note",headerName:"Keterangan",minWidth:120},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=z({value:null}),$=k(!1),h=k(),C=k(),t=z({}),u={date:[{required:!0,message:"Tanggal wajib diisi",trigger:"change"}],request_number:[{required:!0,message:"No transaksi wajib diisi",trigger:"change"}],price:[{required:!0,message:"Harga wajib diisi",trigger:"change"}]},{run:x,response:l,loading:M}=H(),{run:n,response:R,loading:j}=H(),{run:L,loading:K,response:N}=H();async function O(){var o,d,T;try{$.value?(await n(ye.update(a.worklist_id,(o=h.value)==null?void 0:o.id,{date:t.date,price:t.price,request_number:t.request_number,note:t.note,petty_cash:t.petty_cash,transfered_at:t.transfered_at})),(d=R.value)!=null&&d.success&&r()):(await n(ye.create(a.worklist_id,{date:t.date,price:t.price,request_number:t.request_number,note:t.note,petty_cash:t.petty_cash,transfered_at:t.transfered_at})),(T=R.value)!=null&&T.success&&(A(),r()))}catch{}}async function r(){var o;try{await x(ye.list(a.worklist_id)),(o=l.value)!=null&&o.success&&(b.value=l.value.data)}catch{}}function A(){var o;if($)for(const d in t)t[d]=void 0;else(o=C.value)==null||o.resetFields();$.value=!1,h.value=void 0}function J(o){var d;(d=C.value)==null||d.clearValidate(),t.date=o.date,t.note=o.note,t.petty_cash=o.petty_cash,t.price=o.price,t.request_number=o.request_number,t.transfered_at=o.transfered_at,$.value=!0,h.value=o}async function V(){var o,d;try{await L(ye.delete(a.worklist_id,(o=h.value)==null?void 0:o.id)),(d=N.value)!=null&&d.success&&(A(),r())}catch{}}function F(){$e.confirm({title:"Konfirmasi Hapus Biaya Operasional",content:"Apakah kamu sudah yakin ingin menghapus data "+t.request_number+" ?",cancelText:"Batal",onOk:V})}return oe(()=>{r()}),(o,d)=>{const T=je,B=_e,Q=ge,c=Se,D=Me,_=re,q=me;return S(),U("div",null,[e(he,{style:{height:"250px"},"row-data":b.value,"column-defs":i,loading:g(M),onRowClick:J},null,8,["row-data","column-defs","loading"]),p("div",Rt,[p("h5",Bt,W($.value?"Update":"Tambah")+" Biaya Operasional ",1),e(q,{ref_key:"formRef",ref:C,model:t,rules:u,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:d[6]||(d[6]=w=>g(se)(C.value,O))},{default:s(()=>[p("div",It,[p("div",Ut,[e(B,{label:"No Tran",name:"request_number",ref:"request_number"},{default:s(()=>[e(T,{value:t.request_number,"onUpdate:value":d[0]||(d[0]=w=>t.request_number=w)},null,8,["value"])]),_:1},512),e(B,{label:"Tgl Transaksi",name:"date",ref:"date"},{default:s(()=>[e(Q,{value:t.date?g(te)(t.date):void 0,onChange:d[1]||(d[1]=(w,X)=>t.date=X)},null,8,["value"])]),_:1},512),e(B,{label:"Harga",name:"price",ref:"price"},{default:s(()=>[e(c,{value:t.price,"onUpdate:value":d[2]||(d[2]=w=>t.price=w),min:0,formatter:w=>`${w}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:w=>w.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(B,{label:"Petty Cash",name:"petty_cash",ref:"petty_cash"},{default:s(()=>[e(c,{value:t.petty_cash,"onUpdate:value":d[3]||(d[3]=w=>t.petty_cash=w),min:0,formatter:w=>`${w}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:w=>w.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(B,{label:"Tgl Transfer",name:"transfered_at",ref:"transfered_at"},{default:s(()=>[e(Q,{value:t.transfered_at?g(te)(t.transfered_at):void 0,onChange:d[4]||(d[4]=(w,X)=>t.transfered_at=X)},null,8,["value"])]),_:1},512),e(B,{label:"Catatan",name:"note",ref:"note"},{default:s(()=>[e(D,{value:t.note,"onUpdate:value":d[5]||(d[5]=w=>t.note=w)},null,8,["value"])]),_:1},512),e(_,{type:"primary","html-type":"submit",loading:g(j)},{default:s(()=>[Kt,p("span",null,W($.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(_,{class:"mx-3",onClick:A},{default:s(()=>[I(W($.value?"Batal Edit":"Bersihkan"),1)]),_:1}),$.value?(S(),ce(_,{key:0,danger:"",type:"primary",onClick:F,loading:g(K)},{default:s(()=>[I(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])])])}}});class fe{static list(a){return this.HttpClient.axiosInstance.get(`/worklists/${a}/worklist_progresses`)}static create(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Progress Projek berhasil ditambah"}).axiosInstance.post(`/worklists/${a}/worklist_progresses`,i)}static update(a,i,b){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Progress Projek berhasil diupdate"}).axiosInstance.put(`/worklists/${a}/worklist_progresses/${i}`,b)}static delete(a,i){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Progress Projek berhasil dihapus"}).axiosInstance.delete(`/worklists/${a}/worklist_progresses/${i}`)}static formOptions(){return this.HttpClient.axiosInstance.get("/worklists/current/worklist_progresses/form_options")}}de(fe,"HttpClient",new ve);const Gt={class:"m-2 p-4 card"},Wt={class:"mb-4"},Vt={class:"row"},Jt={class:"col-lg-6"},Yt=p("i",{class:"fe fe-save me-2"},null,-1),zt=ie({__name:"ProgressTab",props:{worklist_id:null},setup(f){const a=f,i=[{field:"cost_type.title",headerName:"Jenis",width:150,flex:0},{field:"follow_up_date",headerName:"Tgl Follow Up",...Y},{field:"percentage_of_work",headerName:"Persentase",filter:"agNumberColumnFilter",type:"numericColumn",valueGetter:c=>parseFloat(c.data.percentage_of_work),valueFormatter:c=>Ae(c.value)},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}],b=z({value:null}),$=k(),h=k(!1),C=k(),t=k(),u=z({}),x={cost_type_id:[{required:!0,message:"Jenis wajib diisi",trigger:"change"}],follow_up_date:[{required:!0,message:"Tgl follow up wajib diisi",trigger:"change"}],percentage_of_work:[{required:!0,message:"Persentase wajib diisi",trigger:"change"}]},{run:l,response:M,loading:n}=H(),{run:R,response:j,loading:L}=H(),{run:K,loading:N,response:O}=H(),{run:r,loading:A,response:J}=H();async function V(){var c,D,_;try{h.value?(await R(fe.update(a.worklist_id,(c=C.value)==null?void 0:c.id,{cost_type_id:u.cost_type_id,follow_up_date:u.follow_up_date,percentage_of_work:u.percentage_of_work})),(D=j.value)!=null&&D.success&&F()):(await R(fe.create(a.worklist_id,{cost_type_id:u.cost_type_id,follow_up_date:u.follow_up_date,percentage_of_work:u.percentage_of_work})),(_=j.value)!=null&&_.success&&(d(),F()))}catch{}}async function F(){var c;try{await l(fe.list(a.worklist_id)),(c=M.value)!=null&&c.success&&(b.value=M.value.data)}catch{}}async function o(){var c;try{await r(fe.formOptions()),(c=J.value)!=null&&c.success&&($.value=J.value.data)}catch{}}function d(){var c;if(h)for(const D in u)u[D]=void 0;else(c=t.value)==null||c.resetFields();h.value=!1,C.value=void 0}function T(c){var D;(D=t.value)==null||D.clearValidate(),u.cost_type_id=c.cost_type.id,u.follow_up_date=c.follow_up_date,u.percentage_of_work=c.percentage_of_work,h.value=!0,C.value=c}async function B(){var c,D;try{await K(fe.delete(a.worklist_id,(c=C.value)==null?void 0:c.id)),(D=O.value)!=null&&D.success&&(d(),F())}catch{}}function Q(){$e.confirm({title:"Konfirmasi Hapus Progress",content:"Apakah kamu sudah yakin ingin menghapus data  ?",cancelText:"Batal",onOk:B})}return oe(()=>{F(),o()}),(c,D)=>{const _=Oe,q=Pe,w=_e,X=ge,m=Se,E=re,ne=me;return S(),U("div",null,[e(he,{style:{height:"250px"},"row-data":b.value,"column-defs":i,loading:g(n),onRowClick:T},null,8,["row-data","column-defs","loading"]),p("div",Gt,[p("h5",Wt,W(h.value?"Update":"Tambah")+" Progress",1),e(ne,{ref_key:"formRef",ref:t,model:u,rules:x,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:D[3]||(D[3]=P=>g(se)(t.value,V))},{default:s(()=>[p("div",Vt,[p("div",Jt,[e(w,{label:"Jenis",name:"cost_type_id",ref:"cost_type_id"},{default:s(()=>[e(q,{value:u.cost_type_id,"onUpdate:value":D[0]||(D[0]=P=>u.cost_type_id=P)},{default:s(()=>{var P;return[(S(!0),U(Ke,null,Ee((P=$.value)==null?void 0:P.cost_types,ee=>(S(),ce(_,{value:ee.id},{default:s(()=>[I(W(ee.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),e(w,{label:"Tgl Follow Up",name:"follow_up_date",ref:"follow_up_date"},{default:s(()=>[e(X,{value:u.follow_up_date?g(te)(u.follow_up_date):void 0,onChange:D[1]||(D[1]=(P,ee)=>u.follow_up_date=ee)},null,8,["value"])]),_:1},512),e(w,{label:"Persentase",name:"percentage_of_work",ref:"percentage_of_work"},{default:s(()=>[e(m,{value:u.percentage_of_work,"onUpdate:value":D[2]||(D[2]=P=>u.percentage_of_work=P),min:0,formatter:P=>`${P}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:P=>P.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),e(E,{type:"primary","html-type":"submit",loading:g(L)},{default:s(()=>[Yt,p("span",null,W(h.value?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(E,{class:"mx-3",onClick:d},{default:s(()=>[I(W(h.value?"Batal Edit":"Bersihkan"),1)]),_:1}),h.value?(S(),ce(E,{key:0,danger:"",type:"primary",onClick:Q,loading:g(N)},{default:s(()=>[I(" Hapus ")]),_:1},8,["loading"])):Ce("",!0)])])]),_:1},8,["model"])])])}}}),Qt={class:"card card-custom card-dense"},Lt={class:"card-body"},Xt={class:"row"},Zt={class:"col-lg-6"},ea=p("i",{class:"fe fe-save me-2"},null,-1),ta=ie({__name:"Form",props:{formData:null,editMode:{type:Boolean}},emits:["cancelEdit","onSuccess"],setup(f,{emit:a}){const i=f,b=[{field:"code",headerName:"Kode Customer"},{field:"name",headerName:"Nama Customer"},{field:"customer_group.name",headerName:"Grup Customer"},{field:"address",headerName:"Alamat"},{field:"note",headerName:"Keterangan"}],$=[{field:"code",headerName:"Kode Unit"},{field:"name",headerName:"Nama Unit"}],h=k(0),C=k("1"),t=k(""),u=k(""),x=k(),l=k(),M=k(),n=z({}),R={customer_id:[{required:!0,message:"Customer wajib dipilih",trigger:"change"}],customer_unit_id:[{required:!0,message:"Customer unit wajib dipilih",trigger:"change"}],worklist_date:[{required:!0,message:"Tanggal projek wajib diisi",trigger:"change"}],type_id:[{required:!0,message:"Tipe projek wajib dipilih",trigger:"change"}],title:[{required:!0,message:"Judul projek wajib diisi",trigger:"change"}]},{run:j,loading:L,response:K}=H(),{run:N,loading:O,response:r}=H();async function A(){var F,o,d;try{i.editMode?await j(be.update((F=i.formData)==null?void 0:F.id,{customer_id:n.customer_id,customer_unit_id:n.customer_unit_id,title:n.title,type_id:n.type_id,worklist_date:n.worklist_date,note:n.note})):(await j(be.create({customer_id:n.customer_id,customer_unit_id:n.customer_unit_id,type_id:n.type_id,title:n.title,worklist_date:n.worklist_date,note:n.note})),(o=K.value)!=null&&o.success&&J()),(d=K.value)!=null&&d.success&&a("onSuccess")}catch{}}function J(){var F;if(i.editMode){for(const o in n)n[o]=void 0;a("cancelEdit")}else{(F=M.value)==null||F.resetFields();for(const o in n)n[o]=void 0}u.value="",t.value=""}async function V(){var F;try{await N(be.formOptions(n.customer_id)),(F=r.value)!=null&&F.success&&(l.value=r.value.data.customer_units)}catch{}}return Ge(()=>i.formData,()=>{var F;i.formData&&(C.value="1",h.value+=1,(F=M.value)==null||F.clearValidate(),n.customer_id=i.formData.customer.id,n.customer_unit_id=i.formData.customer_unit.id,n.title=i.formData.title,n.note=i.formData.note,n.type_id=i.formData.type_id,n.worklist_date=i.formData.worklist_date,u.value=`${i.formData.customer_unit.code} - ${i.formData.customer_unit.name}`,t.value=`${i.formData.customer.code} - ${i.formData.customer.name}`,V())}),oe(async()=>{var F;try{await N(be.formOptions()),(F=r.value)!=null&&F.success&&(x.value=r.value.data)}catch{}}),(F,o)=>{const d=je,T=_e,B=ge,Q=Oe,c=Pe,D=Me,_=re,q=me,w=Je,X=Ye;return S(),U("div",Qt,[(S(),ce(X,{activeKey:C.value,"onUpdate:activeKey":o[7]||(o[7]=m=>C.value=m),type:"card","destroy-inactive-tab-pane":!1,key:`${h.value}`},{default:s(()=>[e(w,{key:"1",tab:"Projek"},{default:s(()=>[p("div",Lt,[e(q,{ref_key:"formRef",ref:M,model:n,rules:R,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:o[6]||(o[6]=m=>g(se)(M.value,A))},{default:s(()=>[p("div",Xt,[p("div",Zt,[e(T,{label:"No Projek"},{default:s(()=>{var m;return[e(d,{value:f.editMode?(m=i.formData)==null?void 0:m.worklist_number:"",disabled:""},null,8,["value"])]}),_:1}),e(T,{label:"Customer",name:"customer_id",ref:"customer_id"},{default:s(()=>{var m;return[e(Ne,{"column-defs":b,"grid-data":((m=x.value)==null?void 0:m.customers)??[],loading:g(O),value:void 0,"value-display":t.value,onChange:o[0]||(o[0]=E=>{E.id!==n.customer_id&&(n.customer_unit_id=void 0,u.value=""),n.customer_id=E.id,t.value=`${E.code} - ${E.name}`,V()})},null,8,["grid-data","loading","value-display"])]}),_:1},512),e(T,{label:"Unit",name:"customer_unit_id",ref:"customer_unit_id"},{default:s(()=>[e(Ne,{"column-defs":$,"grid-data":l.value??[],loading:l.value===null,value:void 0,"value-display":u.value,disabled:!n.customer_id,onChange:o[1]||(o[1]=m=>{n.customer_unit_id=m.id,u.value=`${m.code} - ${m.name}`})},null,8,["grid-data","loading","value-display","disabled"])]),_:1},512),e(T,{label:"Tgl Projek",name:"worklist_date",ref:"worklist_date"},{default:s(()=>[e(B,{value:n.worklist_date?g(te)(n.worklist_date):void 0,onChange:o[2]||(o[2]=(m,E)=>n.worklist_date=E)},null,8,["value"])]),_:1},512),e(T,{label:"Judul",name:"title",ref:"title"},{default:s(()=>[e(d,{value:n.title,"onUpdate:value":o[3]||(o[3]=m=>n.title=m)},null,8,["value"])]),_:1},512),e(T,{label:"Jenis Projek",name:"type_id",ref:"type_id"},{default:s(()=>[e(c,{value:n.type_id,"onUpdate:value":o[4]||(o[4]=m=>n.type_id=m)},{default:s(()=>{var m;return[(S(!0),U(Ke,null,Ee((m=x.value)==null?void 0:m.types,E=>(S(),ce(Q,{value:E.id},{default:s(()=>[I(W(E.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),e(T,{label:"Keterangan",name:"note",ref:"note"},{default:s(()=>[e(D,{value:n.note,"onUpdate:value":o[5]||(o[5]=m=>n.note=m)},null,8,["value"])]),_:1},512),e(_,{type:"primary","html-type":"submit",loading:g(L)},{default:s(()=>[ea,p("span",null,W(f.editMode?"Edit":"Simpan"),1)]),_:1},8,["loading"]),e(_,{class:"mx-3",onClick:J},{default:s(()=>[I(W(f.editMode?"Batal Edit":"Bersihkan"),1)]),_:1})])])]),_:1},8,["model"])])]),_:1}),e(w,{disabled:!f.editMode,key:"2",tab:"Pekerja"},{default:s(()=>{var m;return[e(ft,{worklist_id:(m=f.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!f.editMode,key:"3",tab:"Produk & Material"},{default:s(()=>{var m;return[e(bt,{worklist_id:(m=f.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!f.editMode,key:"4",tab:"Biaya Operasional"},{default:s(()=>{var m;return[e(Et,{worklist_id:(m=f.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!f.editMode,key:"5",tab:"PR"},{default:s(()=>{var m;return[e(Nt,{worklist_id:(m=f.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!f.editMode,key:"6",tab:"PO"},{default:s(()=>{var m;return[e(Mt,{worklist_id:(m=f.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"]),e(w,{disabled:!f.editMode,key:"7",tab:"Progress"},{default:s(()=>{var m;return[e(zt,{worklist_id:(m=f.formData)==null?void 0:m.id},null,8,["worklist_id"])]}),_:1},8,["disabled"])]),_:1},8,["activeKey"]))])}}}),aa=ie({__name:"DataTable",props:{idx:null},emits:["rowClick"],setup(f,{emit:a}){const i=f,b=z({value:[{field:"worklist_number",headerName:"No Projek",width:120,flex:0,pinned:"left"},{field:"title",headerName:"Judul",width:150,flex:0,autoHeight:!0,wrapText:!0},{field:"worklist_date_caption",headerName:"Tgl Projek",width:150,flex:0},{field:"customer.name",headerName:"Customer",width:150,flex:0},{field:"customer_unit.name",headerName:"Customer Unit",width:150,flex:0},{field:"type_caption",headerName:"Jenis Projek",width:110,flex:0},{field:"status_caption",headerName:"Status",width:150,flex:0},{field:"note",headerName:"Keterangan",width:150,flex:0},{field:"created_at",headerName:"Diinput Tgl",...Y},{field:"updated_at",headerName:"Diupdate Tgl",...Y},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}]}),$=z({value:null}),{run:h,response:C,loading:t}=H();async function u(){var l;try{await h(be.list()),(l=C.value)!=null&&l.success&&($.value=C.value.data)}catch{}}function x(l){a("rowClick",l)}return oe(()=>{u()}),Ge(()=>i.idx,()=>{u()}),(l,M)=>(S(),U("div",null,[e(he,{"row-data":$.value,"column-defs":b.value,loading:g(t),onRowClick:x},null,8,["row-data","column-defs","loading"])]))}}),sa=p("span",null,[p("i",{class:"fe fe-edit-2 me-2"}),I(" Input ")],-1),ia=p("span",null,[p("i",{class:"fe fe-search me-2"}),I(" Browse ")],-1),ra=p("i",{class:"fe fe-refresh-cw me-2"},null,-1),za=ie({__name:"index",setup(f){const a=k("1"),i=k(),b=k(!1),$=k(1);function h(u){a.value="1",i.value={...u},b.value=!0}function C(){b.value=!1}function t(u){$.value+=1,u!==void 0&&(b.value=u)}return(u,x)=>{const l=Je,M=re,n=Ye;return S(),U("div",null,[e(n,{class:"input-browse-tab",activeKey:a.value,"onUpdate:activeKey":x[1]||(x[1]=R=>a.value=R),animated:""},ot({default:s(()=>[e(l,{key:"1"},{tab:s(()=>[sa]),default:s(()=>[e(ta,{"form-data":i.value,"edit-mode":b.value,onCancelEdit:C,onOnSuccess:t},null,8,["form-data","edit-mode"])]),_:1}),e(l,{key:"2"},{tab:s(()=>[ia]),default:s(()=>[e(aa,{idx:$.value,onRowClick:h},null,8,["idx"])]),_:1})]),_:2},[a.value==="2"?{name:"rightExtra",fn:s(()=>[e(M,{size:"small",class:"mt-3",onClick:x[0]||(x[0]=R=>$.value+=1)},{default:s(()=>[ra,I(" Refresh Data ")]),_:1})]),key:"0"}:void 0]),1032,["activeKey"])])}}});export{za as default};
