var H=Object.defineProperty;var K=(e,d,r)=>d in e?H(e,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[d]=r;var L=(e,d,r)=>(K(e,typeof d!="symbol"?d+"":d,r),r);import{H as F,u as C}from"./HttpClient-1b2eaec7.js";import{a as G}from"./index-b46cc542.js";import{_ as J}from"./InputDropdown.vuevuetypescriptsetuptruelang-42ddf6af.js";import{W as U}from"./WorklistService-4ea6a29b.js";import{d as V,r as u,a as $,e as M,a7 as O,ac as t,c as z,u as Q,aa as s,ae as X,af as Y,ag as Z,a6 as tt}from"./plugin-vueexport-helper-50c92bea.js";import"./index-f73f074f.js";import"./index-90b0ce28.js";import"./dayjs.min-527378d9.js";/* empty css              */import"./AgGrid.vuevuetypescriptsetuptruelang-ab623fe9.js";import"./Input-0690b7a8.js";class R{static show(d){return this.HttpClient.axiosInstance.get("/reports/profit_and_loss",{params:{worklist_id:d}})}}L(R,"HttpClient",new F);const o=e=>(Y("data-v-4b172237"),e=e(),Z(),e),ot={style:{width:"350px"},class:"mb-3 d-flex align-items-center"},st=o(()=>t("span",{class:"fw-bold me-3"},"Projek",-1)),lt={key:0,class:"card card-custom card-dense"},et={class:"card-body"},dt=o(()=>t("h5",null,"Profit & Loss",-1)),nt={class:"d-flex mb-1"},at=o(()=>t("div",{class:"fw-bold",style:{width:"100px"}},"Projek",-1)),rt={style:{flex:"1"}},it={class:"d-flex mb-1"},_t=o(()=>t("div",{class:"fw-bold",style:{width:"100px"}},"No LS",-1)),ct={style:{flex:"1"}},ut={class:"d-flex mb-1"},ht=o(()=>t("div",{class:"fw-bold",style:{width:"100px"}},"No PR",-1)),pt={style:{flex:"1"}},ft={class:"d-flex mb-1"},yt=o(()=>t("div",{class:"fw-bold",style:{width:"100px"}},"No PO",-1)),mt={style:{flex:"1"}},vt={class:"d-flex mb-1"},bt=o(()=>t("div",{class:"fw-bold",style:{width:"100px"}},"No SPK",-1)),gt={style:{flex:"1"}},wt={class:"mt-4"},kt={id:"table-profit",class:"table table-bordered"},xt=o(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null,"Jasa"),t("th",null,"Material"),t("th",null,"Consumable"),t("th",null,"Operasional"),t("th",null,"Progress")])],-1)),Pt=o(()=>t("th",{style:{width:"200px"}},"NILAI PO/PH SEBELUM PPN",-1)),Nt=o(()=>t("td",null,null,-1)),It=o(()=>t("tr",null,[t("th",{style:{width:"200px"}},"ESTIMASI PENGELUARAN"),t("td"),t("td"),t("td"),t("td")],-1)),At=o(()=>t("th",{style:{width:"200px"}},"PEMBELIAN MATERIAL SEBELUM PPN",-1)),Et=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),St=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Lt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Ct=o(()=>t("td",null,null,-1)),Mt=o(()=>t("th",{style:{width:"200px"}},"NILAI SPK / GAJI PEKERJA",-1)),Ot=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Rt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Tt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Wt=o(()=>t("td",null,null,-1)),Bt=o(()=>t("th",{style:{width:"200px"}},"PEMAKAIAN CONSUMABLE",-1)),qt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Dt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),jt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Ht=o(()=>t("td",null,null,-1)),Kt=o(()=>t("th",{style:{width:"200px"}},"OPERASIONAL LAPANGAN",-1)),Ft=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Gt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Jt=o(()=>t("td",{style:{"background-color":"gray"}},null,-1)),Ut=o(()=>t("td",null,null,-1)),Vt=o(()=>t("tr",null,[t("th",{style:{width:"200px"}},"ESTIMASI PROFIT"),t("td"),t("td"),t("td"),t("td"),t("td")],-1)),$t=o(()=>t("th",{style:{width:"200px"}},"PROFIT / LOSS",-1)),zt=o(()=>t("td",null,null,-1)),Qt=o(()=>t("th",{style:{width:"200px"}},"NET PROFIT",-1)),Xt={colspan:"5",class:"fw-bold"},Yt=V({__name:"index",setup(e){const d=[{field:"worklist_number",headerName:"Kode Projek"},{field:"title",headerName:"Judul Projek"},{field:"worklist_date",headerName:"Tgl Projek",...G}],r=u([]),h=u(""),a=u(),{run:T,loading:W,response:p}=C(),{run:B,loading:Zt,response:f}=C();async function q(){var n;try{await T(U.list("2022-01-01","2050-01-01")),(n=p.value)!=null&&n.success&&(r.value=p.value.data)}catch{}}async function D(n){var _;try{await B(R.show(n)),(_=f.value)!=null&&_.success&&(a.value=f.value.data)}catch{}}function j(n){h.value=`${n.worklist_number} - ${n.title}`,D(n.id)}function l(n){var i;return(i=a.value)==null?void 0:i.reports.find(c=>c.cost_type.id===n)}return $(()=>{q()}),(n,_)=>{var i,c,y,m,v,b,g,w,k,x,P,N,I,A,E,S;return M(),O("div",null,[t("div",ot,[st,z(J,{"column-defs":d,"grid-data":r.value,loading:Q(W),value:void 0,"value-display":h.value,onChange:j},null,8,["grid-data","loading","value-display"])]),a.value?(M(),O("div",lt,[t("div",et,[dt,t("div",null,[t("div",nt,[at,t("div",rt,s(a.value.worklist.title),1)]),t("div",it,[_t,t("div",ct,s((i=a.value.worklist.survey_report)==null?void 0:i.survey_report_number),1)]),t("div",ut,[ht,t("div",pt,s((c=a.value.worklist.worklist_purchase_requisition)==null?void 0:c.purchase_requisition_number),1)]),t("div",ft,[yt,t("div",mt,s((y=a.value.worklist.worklist_purchase_order)==null?void 0:y.purchase_order_number),1)]),t("div",vt,[bt,t("div",gt,s((m=a.value.worklist.work_order)==null?void 0:m.letter_number),1)])]),t("div",wt,[t("table",kt,[xt,t("tbody",null,[t("tr",null,[Pt,t("td",null,s((v=l(1))==null?void 0:v.formatted_price_quotation_total),1),t("td",null,s((b=l(2))==null?void 0:b.formatted_price_quotation_total),1),t("td",null,s((g=l(3))==null?void 0:g.formatted_price_quotation_total),1),t("td",null,s((w=l(4))==null?void 0:w.formatted_price_quotation_total),1),Nt]),It,t("tr",null,[At,Et,t("td",null,s((k=l(2))==null?void 0:k.formatted_total_cost),1),St,Lt,Ct]),t("tr",null,[Mt,t("td",null,s((x=l(1))==null?void 0:x.formatted_total_cost),1),Ot,Rt,Tt,Wt]),t("tr",null,[Bt,qt,Dt,t("td",null,s((P=l(3))==null?void 0:P.formatted_total_cost),1),jt,Ht]),t("tr",null,[Kt,Ft,Gt,Jt,t("td",null,s((N=l(4))==null?void 0:N.formatted_total_cost),1),Ut]),Vt,t("tr",null,[$t,t("td",null,s((I=l(1))==null?void 0:I.formatted_profit_or_loss),1),t("td",null,s((A=l(2))==null?void 0:A.formatted_profit_or_loss),1),t("td",null,s((E=l(3))==null?void 0:E.formatted_profit_or_loss),1),t("td",null,s((S=l(4))==null?void 0:S.formatted_profit_or_loss),1),zt]),t("tr",null,[Qt,t("td",Xt,s(a.value.total_profit_or_loss),1)])])])])])])):X("",!0)])}}});const ho=tt(Yt,[["__scopeId","data-v-4b172237"]]);export{ho as default};
