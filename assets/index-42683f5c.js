var j=Object.defineProperty;var B=(l,o,e)=>o in l?j(l,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[o]=e;var M=(l,o,e)=>(B(l,typeof o!="symbol"?o+"":o,e),e);import"./index-90b0ce28.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as h}from"./dayjs.min-78ae9b26.js";import{d as N,e as n,a7 as c,ac as t,aa as i,u as _,F as y,ab as k,am as R,a6 as q,r as b,b as F,a as V,c as v}from"./plugin-vueexport-helper-50c92bea.js";import{H as I,u as J}from"./HttpClient-042fc245.js";import{_ as K}from"./index-f745af45.js";import{D as U}from"./dayjs-2f47e06b.js";import{S as z}from"./Spin-b354b368.js";import{_ as A}from"./index-77a3d62a.js";import"./index-3c58d5d9.js";import"./Input-171d1ec7.js";import"./SearchOutlined-7906676b.js";import"./debounce-59d4e949.js";import"./isSymbol-9d3d42e9.js";import"./TextArea-bf7cacd1.js";import"./Password-64f79199.js";import"./EyeOutlined-94af75b6.js";import"./index-4c8ffcc7.js";import"./useRefs-c0f8034e.js";import"./useMemo-b955d761.js";import"./CheckOutlined-48efc1ed.js";const E={style:{display:"flex","flex-wrap":"wrap"}},T={style:{width:"100%"}},G=R('<div class="date-cell text-center bg-secondary" data-v-e71e4a81>Minggu</div><div class="date-cell text-center bg-secondary" data-v-e71e4a81>Senin</div><div class="date-cell text-center bg-secondary" data-v-e71e4a81>Selasa</div><div class="date-cell text-center bg-secondary" data-v-e71e4a81>Rabu</div><div class="date-cell text-center bg-secondary" data-v-e71e4a81>Kamis</div><div class="date-cell text-center bg-secondary" data-v-e71e4a81>Jumat</div><div class="date-cell text-center bg-secondary" data-v-e71e4a81>Sabtu</div>',7),Q={style:{display:"flex","flex-wrap":"wrap"}},W={class:"text-primary"},X=N({__name:"Calendar",props:{month:null,progress:null},setup(l){const o=l,e=h(o.month),r=e.startOf("month"),f=e.endOf("month"),w=r.day(),m=f.date();function g(u){const p=o.progress.find(a=>a.follow_up_date===u);return p?p.percentage_of_work+"%":""}return(u,p)=>(n(),c("div",null,[t("div",E,[t("div",T,i(_(e).format("MMMM YYYY")),1),G]),t("div",Q,[(n(!0),c(y,null,k(_(w),a=>(n(),c("div",{class:"date-cell bg-light",key:`${a}`}))),128)),(n(!0),c(y,null,k(_(m),a=>(n(),c("div",{class:"date-cell d-flex justify-content-between bg-light flex-wrap",key:`${a}`},[t("div",null,i(a.toString().padStart(2,"0")),1),t("div",W,i(g(`${l.month}-${a.toString().padStart(2,"0")}`)),1)]))),128))])]))}});const Z=q(X,[["__scopeId","data-v-e71e4a81"]]);class Y{static list(o,e){return this.HttpClient.axiosInstance.get("/reports/real_turnover_per_month",{params:{month_id:o,year_id:e}})}}M(Y,"HttpClient",new I);const tt={class:"d-flex mb-2"},st={key:0,class:"text-center"},et={class:"card card-custom card-dense mb-3"},ot={class:"card-body"},at={class:"row"},it={class:"col-12"},lt={class:"col-12 col-lg-6"},nt={class:"row mb-2"},ct={class:"col-12"},dt={class:"d-flex align-items-center"},rt={class:"fw-bold me-3"},_t={class:"badge text-bg-light"},ut={class:"row mb-2"},pt={class:"col-4"},vt=t("div",{class:"fw-bold"},"Start Job",-1),mt={class:"col-4"},ht=t("div",{class:"fw-bold"},"Tgl BA",-1),ft={class:"col-4"},wt=t("div",{class:"fw-bold"},"Unit",-1),gt={class:"row mb-2"},bt={class:"col-4"},yt=t("div",{class:"fw-bold"},"No PR",-1),kt={class:"col-4"},xt=t("div",{class:"fw-bold"},"No PO",-1),Ct={class:"col-4"},St=t("div",{class:"fw-bold"},"No SPK",-1),Dt={class:"row mb-2"},$t={class:"col-4"},Mt=t("div",{class:"fw-bold"},"Progress Sebelumnya",-1),Nt={class:"col-4"},Yt=t("div",{class:"fw-bold"},"Nilai PH/PO",-1),Ot={class:"col-4"},Pt=t("div",{class:"fw-bold"},"Nilai Omset",-1),Ht={class:"col-12 col-lg-6"},ls=N({__name:"index",setup(l){const o=b([]),e=b(h().format("YYYY-MM")),r=b(""),f=F(()=>o.value.filter(a=>a.worklist.worklist_number.toLowerCase().includes(r.value.toLowerCase())||a.worklist.title.toLowerCase().includes(r.value.toLowerCase()))),{run:w,response:m,loading:g}=J();async function u(){var a;try{const d=h(e.value);await w(Y.list(d.get("month")+1,d.get("year"))),(a=m.value)!=null&&a.success&&(o.value=m.value.data)}catch{}}function p(a,d){e.value=d,u()}return V(()=>{u()}),(a,d)=>{const O=U,P=K,H=z,L=A;return n(),c("div",null,[t("div",tt,[v(O,{value:_(h)(e.value),style:{width:"150px"},picker:"month",onChange:p},null,8,["value"]),v(P,{value:r.value,"onUpdate:value":d[0]||(d[0]=s=>r.value=s),class:"mx-2",placeholder:"Cari no / nama projek",style:{width:"200px"}},null,8,["value"])]),_(g)?(n(),c("div",st,[v(H)])):(n(!0),c(y,{key:1},k(_(f),s=>{var x,C,S,D,$;return n(),c("div",{key:`${s.worklist.id}`},[t("div",et,[t("div",ot,[t("div",null,[t("div",at,[t("div",it,[t("div",null,[v(L,{percent:s.progress_this_month,size:"small"},null,8,["percent"])])]),t("div",lt,[t("div",nt,[t("div",ct,[t("div",dt,[t("span",rt,i(s.worklist.worklist_number),1),t("span",_t,i(s.status),1)]),t("div",null,i(s.worklist.title),1)])]),t("div",ut,[t("div",pt,[vt,t("div",null,i(s.worklist.work_started_on_caption),1)]),t("div",mt,[ht,t("div",null,i(((x=s.worklist.submission_report)==null?void 0:x.work_completion_report_date_caption)??"-"),1)]),t("div",ft,[wt,t("div",null,i(s.worklist.customer_unit.name),1)])]),t("div",gt,[t("div",bt,[yt,t("div",null,i(((C=s.worklist.worklist_purchase_requisition)==null?void 0:C.purchase_requisition_number)??"-"),1)]),t("div",kt,[xt,t("div",null,i(((S=s.worklist.worklist_purchase_order)==null?void 0:S.purchase_order_number)??"-"),1)]),t("div",Ct,[St,t("div",null,i(((D=s.worklist.work_order)==null?void 0:D.letter_number)??"-"),1)])]),t("div",Dt,[t("div",$t,[Mt,t("div",null,i(s.progress_in_the_previus_month)+"%",1)]),t("div",Nt,[Yt,t("div",null,i(($=s.worklist.price_quotation)==null?void 0:$.formatted_subtotal),1)]),t("div",Ot,[Pt,t("div",null,i(s.turnover),1)])])]),t("div",Ht,[v(Z,{month:e.value,progress:s.progresses},null,8,["month","progress"])])])])])])])}),128))])}}});export{ls as default};
