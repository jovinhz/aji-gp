var et=Object.defineProperty;var tt=(a,e,t)=>e in a?et(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var $e=(a,e,t)=>(tt(a,typeof e!="symbol"?e+"":e,t),t);import{A as at,a as y,h as J,b as I,O as nt,U as Ve,z as rt,f as it,_ as Te,l as ot,w as ut,P as Se,B as He}from"./index-166a5e79.js";/* empty css              */import{H as lt,u as ge}from"./HttpClient-ff08f65a.js";import{$ as qe,a0 as je,Y as ve,a5 as st,o as ct,a8 as dt,I as ft}from"./index-91845532.js";import{o as vt,a as Oe}from"./index-44824ea8.js";import{D as mt,_ as pt,S as gt}from"./index-b0de0db5.js";import{_ as _t}from"./InputDropdown.vue_vue_type_script_setup_true_lang-30fcb548.js";import{_ as ht}from"./TextArea-d0614689.js";import"./index-ecd53389.js";import{b as c,d as ae,r as w,o as Ke,f as me,w as Z,Q as ke,e as ze,g as X,a2 as _e,a7 as O,j as pe,k as N,a4 as Y,u as re,F as bt,a6 as yt,a5 as Ne,a9 as St,aj as Nt}from"./runtime-core.esm-bundler-441c3591.js";import{i as xt,M as wt,_ as kt,T as Dt,a as It}from"./Modal-c770c219.js";import{_ as Ct,F as Et}from"./index-1ee0591d.js";import{_ as Mt}from"./AgGrid.vue_vue_type_script_setup_true_lang-2a0939af.js";import"./SearchOutlined-03507279.js";import"./_plugin-vue_export-helper-c27b6911.js";var Bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};const Ft=Bt;function Ae(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),o.forEach(function(l){$t(a,l,t[l])})}return a}function $t(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var Ce=function(e,t){var o=Ae({},e,t.attrs);return c(at,Ae({},o,{icon:Ft}),null)};Ce.displayName="UpOutlined";Ce.inheritAttrs=!1;const Vt=Ce;function De(){return typeof BigInt=="function"}function ie(a){var e=a.trim(),t=e.startsWith("-");t&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var o=e||"0",l=o.split("."),f=l[0]||"0",v=l[1]||"0";f==="0"&&v==="0"&&(t=!1);var r=t?"-":"";return{negative:t,negativeStr:r,trimStr:o,integerStr:f,decimalStr:v,fullStr:"".concat(r).concat(o)}}function Ee(a){var e=String(a);return!Number.isNaN(Number(e))&&e.includes("e")}function ue(a){var e=String(a);if(Ee(a)){var t=Number(e.slice(e.indexOf("e-")+2)),o=e.match(/\.(\d+)/);return o!=null&&o[1]&&(t+=o[1].length),t}return e.includes(".")&&Be(e)?e.length-e.indexOf(".")-1:0}function Me(a){var e=String(a);if(Ee(a)){if(a>Number.MAX_SAFE_INTEGER)return String(De()?BigInt(a).toString():Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return String(De()?BigInt(a).toString():Number.MIN_SAFE_INTEGER);e=a.toFixed(ue(e))}return ie(e).fullStr}function Be(a){return typeof a=="number"?!Number.isNaN(a):a?/^\s*-?\d+(\.\d+)?\s*$/.test(a)||/^\s*-?\d+\.\s*$/.test(a)||/^\s*-?\.\d+\s*$/.test(a):!1}var Ot=function(){function a(e){if(je(this,a),y(this,"origin",""),!e&&e!==0||!String(e).trim()){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return qe(a,[{key:"negate",value:function(){return new a(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new a(t);var o=Number(t);if(Number.isNaN(o))return this;var l=this.number+o;if(l>Number.MAX_SAFE_INTEGER)return new a(Number.MAX_SAFE_INTEGER);if(l<Number.MIN_SAFE_INTEGER)return new a(Number.MIN_SAFE_INTEGER);var f=Math.max(ue(this.number),ue(o));return new a(l.toFixed(f))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":Me(this.number):this.origin}}]),a}(),At=function(){function a(e){if(je(this,a),y(this,"origin",""),!e&&e!==0||!String(e).trim()){this.empty=!0;return}if(this.origin=String(e),e==="-"){this.nan=!0;return}var t=e;if(Ee(t)&&(t=Number(t)),t=typeof t=="string"?t:Me(t),Be(t)){var o=ie(t);this.negative=o.negative;var l=o.trimStr.split(".");this.integer=BigInt(l[0]);var f=l[1]||"0";this.decimal=BigInt(f),this.decimalLen=f.length}else this.nan=!0}return qe(a,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var o="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(o)}},{key:"negate",value:function(){var t=new a(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new a(t);var o=new a(t);if(o.isInvalidate())return this;var l=Math.max(this.getDecimalStr().length,o.getDecimalStr().length),f=this.alignDecimal(l),v=o.alignDecimal(l),r=(f+v).toString(),d=ie(r),p=d.negativeStr,m=d.trimStr,u="".concat(p).concat(m.padStart(l+1,"0"));return new a("".concat(u.slice(0,-l),".").concat(u.slice(-l)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":ie("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),a}();function T(a){return De()?new At(a):new Ot(a)}function Ie(a,e,t){if(a==="")return"";var o=ie(a),l=o.negativeStr,f=o.integerStr,v=o.decimalStr,r="".concat(e).concat(v),d="".concat(l).concat(f);if(t>=0){var p=Number(v[t]);if(p>=5){var m=T(a).add("".concat(l,"0.").concat("0".repeat(t)).concat(10-p));return Ie(m.toString(),e,t)}return t===0?d:"".concat(d).concat(e).concat(v.padEnd(t,"0").slice(0,t))}return r===".0"?d:"".concat(d).concat(r)}var Pt=200,Rt=600;const Ut=ae({compatConfig:{MODE:3},name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:{type:Function}},slots:["upNode","downNode"],setup:function(e,t){var o=t.slots,l=t.emit,f=w(),v=function(p,m){p.preventDefault(),l("step",m);function u(){l("step",m),f.value=setTimeout(u,Pt)}f.value=setTimeout(u,Rt)},r=function(){clearTimeout(f.value)};return Ke(function(){r()}),function(){if(xt())return null;var d=e.prefixCls,p=e.upDisabled,m=e.downDisabled,u="".concat(d,"-handler"),F=J(u,"".concat(u,"-up"),y({},"".concat(u,"-up-disabled"),p)),M=J(u,"".concat(u,"-down"),y({},"".concat(u,"-down-disabled"),m)),$={unselectable:"on",role:"button",onMouseup:r,onMouseleave:r},B=o.upNode,U=o.downNode;return c("div",{class:"".concat(u,"-wrap")},[c("span",I(I({},$),{},{onMousedown:function(V){v(V,!0)},"aria-label":"Increase Value","aria-disabled":p,class:F}),[(B==null?void 0:B())||c("span",{unselectable:"on",class:"".concat(d,"-handler-up-inner")},null)]),c("span",I(I({},$),{},{onMousedown:function(V){v(V,!1)},"aria-label":"Decrease Value","aria-disabled":m,class:M}),[(U==null?void 0:U())||c("span",{unselectable:"on",class:"".concat(d,"-handler-down-inner")},null)])])}}});function Tt(a,e){var t=w(null);function o(){try{var f=a.value,v=f.selectionStart,r=f.selectionEnd,d=f.value,p=d.substring(0,v),m=d.substring(r);t.value={start:v,end:r,value:d,beforeTxt:p,afterTxt:m}}catch{}}function l(){if(a.value&&t.value&&e.value)try{var f=a.value.value,v=t.value,r=v.beforeTxt,d=v.afterTxt,p=v.start,m=f.length;if(f.endsWith(d))m=f.length-t.value.afterTxt.length;else if(f.startsWith(r))m=r.length;else{var u=r[p-1],F=f.indexOf(u,p-1);F!==-1&&(m=F+1)}a.value.setSelectionRange(m,m)}catch(M){nt(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(M.message))}}return[o,l]}const Ht=function(){var a=w(0),e=function(){Ve.cancel(a.value)};return Ke(function(){e()}),function(t){e(),a.value=Ve(function(){t()})}};var qt=["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"],Pe=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},Re=function(e){var t=T(e);return t.isInvalidate()?null:t},Ge=function(){return{stringMode:{type:Boolean},defaultValue:{type:[String,Number]},value:{type:[String,Number]},prefixCls:{type:String},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},tabindex:{type:Number},controls:{type:Boolean,default:!0},readonly:{type:Boolean},disabled:{type:Boolean},autofocus:{type:Boolean},keyboard:{type:Boolean,default:!0},parser:{type:Function},formatter:{type:Function},precision:{type:Number},decimalSeparator:{type:String},onInput:{type:Function},onChange:{type:Function},onPressEnter:{type:Function},onStep:{type:Function},onBlur:{type:Function},onFocus:{type:Function}}};const jt=ae({compatConfig:{MODE:3},name:"InnerInputNumber",inheritAttrs:!1,props:I(I({},Ge()),{},{lazy:Boolean}),slots:["upHandler","downHandler"],setup:function(e,t){var o=t.attrs,l=t.slots,f=t.emit,v=t.expose,r=w(),d=w(!1),p=w(!1),m=w(!1),u=w(T(e.value));function F(s){e.value===void 0&&(u.value=s)}var M=function(n,g){if(!g)return e.precision>=0?e.precision:Math.max(ue(n),ue(e.step))},$=function(n){var g=String(n);if(e.parser)return e.parser(g);var i=g;return e.decimalSeparator&&(i=i.replace(e.decimalSeparator,".")),i.replace(/[^\w.-]+/g,"")},B=w(""),U=function(n,g){if(e.formatter)return e.formatter(n,{userTyping:g,input:String(B.value)});var i=typeof n=="number"?Me(n):n;if(!g){var E=M(i,g);if(Be(i)&&(e.decimalSeparator||E>=0)){var k=e.decimalSeparator||".";i=Ie(i,k,E)}}return i},ee=function(){var s=e.value;return u.value.isInvalidate()&&["string","number"].includes(rt(s))?Number.isNaN(s)?"":s:U(u.value.toString(),!1)}();B.value=ee;function V(s,n){B.value=U(s.isInvalidate()?s.toString(!1):s.toString(!n),n)}var H=me(function(){return Re(e.max)}),D=me(function(){return Re(e.min)}),b=me(function(){return!H.value||!u.value||u.value.isInvalidate()?!1:H.value.lessEquals(u.value)}),x=me(function(){return!D.value||!u.value||u.value.isInvalidate()?!1:u.value.lessEquals(D.value)}),_=Tt(r,d),C=it(_,2),q=C[0],A=C[1],K=function(n){return H.value&&!n.lessEquals(H.value)?H.value:D.value&&!D.value.lessEquals(n)?D.value:null},z=function(n){return!K(n)},G=function(n,g){var i=n,E=z(i)||i.isEmpty();if(!i.isEmpty()&&!g&&(i=K(i)||i,E=!0),!e.readonly&&!e.disabled&&E){var k=i.toString(),R=M(k,g);if(R>=0&&(i=T(Ie(k,".",R))),!i.equals(u.value)){var W;F(i),(W=e.onChange)===null||W===void 0||W.call(e,i.isEmpty()?null:Pe(e.stringMode,i)),e.value===void 0&&V(i,g)}return i}return u.value},L=Ht(),j=function s(n){var g;if(q(),B.value=n,!m.value){var i=$(n),E=T(i);E.isNaN()||G(E,!0)}(g=e.onInput)===null||g===void 0||g.call(e,n),L(function(){var k=n;e.parser||(k=n.replace(/。/g,".")),k!==n&&s(k)})},Q=function(){m.value=!0},h=function(){m.value=!1,j(r.value.value)},P=function(n){j(n.target.value)},ne=function(n){var g,i;if(!(n&&b.value||!n&&x.value)){p.value=!1;var E=T(e.step);n||(E=E.negate());var k=(u.value||T(0)).add(E.toString()),R=G(k,!1);(g=e.onStep)===null||g===void 0||g.call(e,Pe(e.stringMode,R),{offset:e.step,type:n?"up":"down"}),(i=r.value)===null||i===void 0||i.focus()}},le=function(n){var g=T($(B.value)),i=g;g.isNaN()?i=u.value:i=G(g,n),e.value!==void 0?V(u.value,!1):i.isNaN()||V(i,!1)},he=function(n){var g=n.which;if(p.value=!0,g===ve.ENTER){var i;m.value||(p.value=!1),le(!1),(i=e.onPressEnter)===null||i===void 0||i.call(e,n)}e.keyboard!==!1&&!m.value&&[ve.UP,ve.DOWN].includes(g)&&(ne(ve.UP===g),n.preventDefault())},S=function(){p.value=!1},te=function(n){le(!1),d.value=!1,p.value=!1,f("blur",n)};return Z(function(){return e.precision},function(){u.value.isInvalidate()||V(u.value,!1)},{flush:"post"}),Z(function(){return e.value},function(){var s=T(e.value);u.value=s;var n=T($(B.value));(!s.equals(n)||!p.value||e.formatter)&&V(s,p.value)},{flush:"post"}),Z(B,function(){e.formatter&&A()},{flush:"post"}),Z(function(){return e.disabled},function(s){s&&(d.value=!1)}),v({focus:function(){var n;(n=r.value)===null||n===void 0||n.focus()},blur:function(){var n;(n=r.value)===null||n===void 0||n.blur()}}),function(){var s,n=I(I({},o),e),g=n.prefixCls,i=g===void 0?"rc-input-number":g,E=n.min,k=n.max,R=n.step,W=R===void 0?1:R;n.defaultValue,n.value;var se=n.disabled,ce=n.readonly;n.keyboard;var de=n.controls,be=de===void 0?!0:de,fe=n.autofocus;n.stringMode,n.parser,n.formatter,n.precision,n.decimalSeparator,n.onChange,n.onInput,n.onPressEnter,n.onStep;var Le=n.lazy,We=n.class,Xe=n.style,Ye=Te(n,qt),Qe=l.upHandler,Je=l.downHandler,Fe="".concat(i,"-input"),ye={};return Le?ye.onChange=P:ye.onInput=P,c("div",{class:J(i,We,(s={},y(s,"".concat(i,"-focused"),d.value),y(s,"".concat(i,"-disabled"),se),y(s,"".concat(i,"-readonly"),ce),y(s,"".concat(i,"-not-a-number"),u.value.isNaN()),y(s,"".concat(i,"-out-of-range"),!u.value.isInvalidate()&&!z(u.value)),s)),style:Xe,onKeydown:he,onKeyup:S},[be&&c(Ut,{prefixCls:i,upDisabled:b.value,downDisabled:x.value,onStep:ne},{upNode:Qe,downNode:Je}),c("div",{class:"".concat(Fe,"-wrap")},[c("input",I(I(I({autofocus:fe,autocomplete:"off",role:"spinbutton","aria-valuemin":E,"aria-valuemax":k,"aria-valuenow":u.value.isInvalidate()?null:u.value.toString(),step:W},Ye),{},{ref:r,class:Fe,value:B.value,disabled:se,readonly:ce,onFocus:function(Ze){d.value=!0,f("focus",Ze)}},ye),{},{onBlur:te,onCompositionstart:Q,onCompositionend:h}),null)])])}}});function xe(a){return a!=null}var Kt=["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"],Ue=Ge(),zt=function(){return I(I({},Ue),{},{size:{type:String},bordered:{type:Boolean,default:!0},placeholder:String,name:String,id:String,type:String,addonBefore:Se.any,addonAfter:Se.any,prefix:Se.any,"onUpdate:value":Ue.onChange,valueModifiers:Object})},we=ae({compatConfig:{MODE:3},name:"AInputNumber",inheritAttrs:!1,props:zt(),slots:["addonBefore","addonAfter","prefix"],setup:function(e,t){var o=t.emit,l=t.expose,f=t.attrs,v=t.slots,r=st(),d=ut("input-number",e),p=d.prefixCls,m=d.size,u=d.direction,F=w(e.value===void 0?e.defaultValue:e.value),M=w(!1);Z(function(){return e.value},function(){F.value=e.value});var $=w(null),B=function(){var b;(b=$.value)===null||b===void 0||b.focus()},U=function(){var b;(b=$.value)===null||b===void 0||b.blur()};l({focus:B,blur:U});var ee=function(b){e.value===void 0&&(F.value=b),o("update:value",b),o("change",b),r.onFieldChange()},V=function(b){M.value=!1,o("blur",b),r.onFieldBlur()},H=function(b){M.value=!0,o("focus",b)};return function(){var D,b,x,_,C=I(I({},f),e),q=C.class,A=C.bordered,K=C.readonly,z=C.style,G=C.addonBefore,L=G===void 0?(D=v.addonBefore)===null||D===void 0?void 0:D.call(v):G,j=C.addonAfter,Q=j===void 0?(b=v.addonAfter)===null||b===void 0?void 0:b.call(v):j,h=C.prefix,P=h===void 0?(x=v.prefix)===null||x===void 0?void 0:x.call(v):h,ne=C.valueModifiers,le=ne===void 0?{}:ne,he=Te(C,Kt),S=p.value,te=m.value,s=J((_={},y(_,"".concat(S,"-lg"),te==="large"),y(_,"".concat(S,"-sm"),te==="small"),y(_,"".concat(S,"-rtl"),u.value==="rtl"),y(_,"".concat(S,"-readonly"),K),y(_,"".concat(S,"-borderless"),!A),_),q),n=c(jt,I(I({},ct(he,["size","defaultValue"])),{},{ref:$,lazy:!!le.lazy,value:F.value,class:s,prefixCls:S,readonly:K,onChange:ee,onBlur:V,onFocus:H}),{upHandler:function(){return c(Vt,{class:"".concat(S,"-handler-up-inner")},null)},downHandler:function(){return c(mt,{class:"".concat(S,"-handler-down-inner")},null)}}),g=xe(L)||xe(Q);if(xe(P)){var i,E=J("".concat(S,"-affix-wrapper"),(i={},y(i,"".concat(S,"-affix-wrapper-focused"),M.value),y(i,"".concat(S,"-affix-wrapper-disabled"),e.disabled),y(i,"".concat(S,"-affix-wrapper-rtl"),u.value==="rtl"),y(i,"".concat(S,"-affix-wrapper-readonly"),K),y(i,"".concat(S,"-affix-wrapper-borderless"),!A),y(i,"".concat(q),!g&&q),i));n=c("div",{class:E,style:z,onMouseup:function(){return $.value.focus()}},[c("span",{class:"".concat(S,"-prefix")},[P]),n])}if(g){var k,R="".concat(S,"-group"),W="".concat(R,"-addon"),se=L?c("div",{class:W},[L]):null,ce=Q?c("div",{class:W},[Q]):null,de=J("".concat(S,"-wrapper"),R,y({},"".concat(R,"-rtl"),u.value==="rtl")),be=J("".concat(S,"-group-wrapper"),(k={},y(k,"".concat(S,"-group-wrapper-sm"),te==="small"),y(k,"".concat(S,"-group-wrapper-lg"),te==="large"),y(k,"".concat(S,"-group-wrapper-rtl"),u.value==="rtl"),k),q);n=c("div",{class:be,style:z},[c("div",{class:de},[se,n,ce])])}return dt(n,{style:z})}}});const Gt=ot(we,{install:function(e){return e.component(we.name,we),e}});class oe{static list(){return this.HttpClient.axiosInstance.get("/products")}static create(e){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil ditambah"}).axiosInstance.post("/products",e)}static update(e,t){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Produk berhasil diupdate"}).axiosInstance.put(`/products/${e}`,t)}static formOptions(){return this.HttpClient.axiosInstance.get("/products/form_options")}}$e(oe,"HttpClient",new lt);const Lt={class:"card card-custom card-dense"},Wt={class:"card-header"},Xt={class:"card-title w-100 d-flex justify-content-between"},Yt=O("h4",{class:"card-label"},"Form Master Produk",-1),Qt={class:"card-body"},Jt={class:"row"},Zt={class:"col-lg-6"},ea=O("i",{class:"fe fe-save me-2"},null,-1),ta=ae({__name:"Form",props:{formData:null,editMode:{type:Boolean}},emits:["cancelEdit","onSuccess"],setup(a,{emit:e}){const t=a,o=[{field:"code",headerName:"Kode Satuan"},{field:"name",headerName:"Nama Satuan"}],l=w(""),f=w(),v=w(),r=ke({}),d={unit_id:[{required:!0,message:"Satuan wajib dipilih",trigger:"change"}],category_id:[{required:!0,message:"Kategori wajib dipilih",trigger:"change"}],code:[{required:!0,message:"Kode produk wajib diisi",trigger:"change"}],name:[{required:!0,message:"Nama produk wajib diisi",trigger:"change"}]},{run:p,loading:m,response:u}=ge(),{run:F,loading:M,response:$}=ge(),{run:B,loading:U,response:ee}=ge();async function V(){var x,_;try{t.editMode?await p(oe.update(t.formData.id,{category_id:r.category_id,unit_id:r.unit_id,name:r.name,description:r.description,maximum_stock:r.maximum_stock,minumum_stock:r.maximum_stock})):(await p(oe.create({code:r.code.toUpperCase(),category_id:r.category_id,name:r.name,unit_id:r.unit_id,description:r.description,maximum_stock:r.maximum_stock,minumum_stock:r.minumum_stock})),(x=u.value)!=null&&x.success&&D()),(_=u.value)!=null&&_.success&&e("onSuccess")}catch{}}async function H(){}function D(){var x;if(t.editMode){for(const _ in r)r[_]=void 0;e("cancelEdit"),l.value=""}else(x=v.value)==null||x.resetFields(),l.value=""}function b(){wt.confirm({title:"Konfirmasi Hapus Produk",content:"Apakah kamu sudah yakin ingin menghapus data [Edit Here]",cancelText:"Batal",onOk:H})}return Z(()=>t.formData,()=>{var x;t.formData&&((x=v.value)==null||x.clearValidate(),r.code=t.formData.code,r.category_id=t.formData.category_id,r.description=t.formData.description,r.maximum_stock=parseInt(t.formData.maximum_stock,10),r.minumum_stock=parseInt(t.formData.minimum_stock,10),r.name=t.formData.name,r.unit_id=t.formData.unit.id,l.value=`${t.formData.unit.code} - ${t.formData.unit.name}`)}),ze(async()=>{var x;try{await F(oe.formOptions()),(x=$.value)!=null&&x.success&&(f.value=$.value.data)}catch{}}),(x,_)=>{const C=kt,q=ft,A=Ct,K=gt,z=pt,G=ht,L=Gt,j=He,Q=Et;return X(),_e("div",Lt,[O("div",Wt,[O("div",Xt,[Yt,a.editMode?(X(),pe(C,{key:0,color:"orange"},{default:N(()=>[Y("Mode Edit")]),_:1})):(X(),pe(C,{key:1,color:"cyan"},{default:N(()=>[Y("Mode Input")]),_:1}))])]),O("div",Qt,[c(Q,{ref_key:"formRef",ref:v,model:r,rules:d,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:_[7]||(_[7]=h=>re(vt)(v.value,V))},{default:N(()=>[O("div",Jt,[O("div",Zt,[c(A,{label:"Kode Produk",name:"code",ref:"code"},{default:N(()=>[c(q,{value:r.code,"onUpdate:value":_[0]||(_[0]=h=>r.code=h),valueModifiers:{trim:!0},style:{"text-transform":"uppercase"},disabled:a.editMode},null,8,["value","disabled"])]),_:1},512),c(A,{label:"Nama Produk",name:"name",ref:"name"},{default:N(()=>[c(q,{value:r.name,"onUpdate:value":_[1]||(_[1]=h=>r.name=h)},null,8,["value"])]),_:1},512),c(A,{label:"Satuan",name:"unit_id",ref:"unit_id"},{default:N(()=>{var h;return[c(_t,{"column-defs":o,"grid-data":((h=f.value)==null?void 0:h.units)??[],loading:re(M),value:void 0,"value-display":l.value,onChange:_[2]||(_[2]=P=>{r.unit_id=P.id,l.value=`${P.code} - ${P.name}`})},null,8,["grid-data","loading","value-display"])]}),_:1},512),c(A,{label:"Kategori Produk",name:"category_id",ref:"category_id"},{default:N(()=>[c(z,{value:r.category_id,"onUpdate:value":_[3]||(_[3]=h=>r.category_id=h)},{default:N(()=>{var h;return[(X(!0),_e(bt,null,yt((h=f.value)==null?void 0:h.categories,P=>(X(),pe(K,{value:P.id},{default:N(()=>[Y(Ne(P.title),1)]),_:2},1032,["value"]))),256))]}),_:1},8,["value"])]),_:1},512),c(A,{label:"Deskripsi",name:"description",ref:"description"},{default:N(()=>[c(G,{value:r.description,"onUpdate:value":_[4]||(_[4]=h=>r.description=h)},null,8,["value"])]),_:1},512),c(A,{label:"Mininum Stok",name:"minimal_stock",ref:"minimal_stock"},{default:N(()=>[c(L,{value:r.minumum_stock,"onUpdate:value":_[5]||(_[5]=h=>r.minumum_stock=h),min:0,formatter:h=>`${h}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:h=>h.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),c(A,{label:"Maksimum Stok",name:"maximum_stock",ref:"maximum_stock"},{default:N(()=>[c(L,{value:r.maximum_stock,"onUpdate:value":_[6]||(_[6]=h=>r.maximum_stock=h),min:0,formatter:h=>`${h}`.replace(/\B(?=(\d{3})+(?!\d))/g,"."),parser:h=>h.replace(/\$\s?|(\.*)/g,"")},null,8,["value","formatter","parser"])]),_:1},512),c(j,{type:"primary","html-type":"submit",loading:re(m)},{default:N(()=>[ea,O("span",null,Ne(a.editMode?"Edit":"Simpan"),1)]),_:1},8,["loading"]),c(j,{class:"mx-3",onClick:D},{default:N(()=>[Y(Ne(a.editMode?"Batal Edit":"Bersihkan"),1)]),_:1}),a.editMode?(X(),pe(j,{key:0,danger:"",type:"primary",onClick:b,loading:re(U)},{default:N(()=>[Y(" Hapus ")]),_:1},8,["loading"])):St("",!0)])])]),_:1},8,["model"])])])}}}),aa=ae({__name:"DataTable",props:{idx:null},emits:["rowClick"],setup(a,{emit:e}){const t=a,o=ke({value:[{field:"code",headerName:"Kode Produk",flex:0,width:150,pinned:"left"},{field:"name",headerName:"Nama",flex:0,width:200,pinned:"left"},{field:"category_caption",headerName:"Kategori",flex:0,width:100},{field:"unit.name",headerName:"Satuan",flex:0,width:90},{field:"minimum_stock",headerName:"Min Stok",flex:0,width:100,filter:"agNumberColumnFilter",type:"numericColumn"},{field:"maximum_stock",headerName:"Max Stok",flex:0,width:100,filter:"agNumberColumnFilter",type:"numericColumn"},{field:"description",headerName:"Deskripsi",flex:0,width:100},{field:"created_at",headerName:"Diinput Tgl",...Oe},{field:"updated_at",headerName:"Diupdate Tgl",...Oe},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}]}),l=ke({value:null}),{run:f,response:v,loading:r}=ge();async function d(){var m;try{await f(oe.list()),(m=v.value)!=null&&m.success&&(l.value=v.value.data)}catch{}}function p(m){e("rowClick",m)}return ze(()=>{d()}),Z(()=>t.idx,()=>{d()}),(m,u)=>(X(),_e("div",null,[c(Mt,{"row-data":l.value,"column-defs":o.value,loading:re(r),onRowClick:p},null,8,["row-data","column-defs","loading"])]))}}),na=O("span",null,[O("i",{class:"fe fe-edit-2 me-2"}),Y(" Input ")],-1),ra=O("span",null,[O("i",{class:"fe fe-search me-2"}),Y(" Browse ")],-1),ia=O("i",{class:"fe fe-refresh-cw me-2"},null,-1),xa=ae({__name:"index",setup(a){const e=w("1"),t=w(),o=w(!1),l=w(1);function f(d){e.value="1",t.value={...d},o.value=!0}function v(){o.value=!1}function r(d){l.value+=1,d!==void 0&&(o.value=d)}return(d,p)=>{const m=It,u=He,F=Dt;return X(),_e("div",null,[c(F,{class:"input-browse-tab",activeKey:e.value,"onUpdate:activeKey":p[1]||(p[1]=M=>e.value=M),animated:""},Nt({default:N(()=>[c(m,{key:"1"},{tab:N(()=>[na]),default:N(()=>[c(ta,{"form-data":t.value,"edit-mode":o.value,onCancelEdit:v,onOnSuccess:r},null,8,["form-data","edit-mode"])]),_:1}),c(m,{key:"2"},{tab:N(()=>[ra]),default:N(()=>[c(aa,{idx:l.value,onRowClick:f},null,8,["idx"])]),_:1})]),_:2},[e.value==="2"?{name:"rightExtra",fn:N(()=>[c(u,{size:"small",class:"mt-3",onClick:p[0]||(p[0]=M=>l.value+=1)},{default:N(()=>[ia,Y(" Refresh Data ")]),_:1})]),key:"0"}:void 0]),1032,["activeKey"])])}}});export{xa as default};
