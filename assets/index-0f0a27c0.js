var q=Object.defineProperty;var z=(o,a,t)=>a in o?q(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t;var K=(o,a,t)=>(z(o,typeof a!="symbol"?a+"":a,t),t);import{B as R}from"./index-0bb8ea7a.js";import{_ as A}from"./AgGrid.vuevuetypescriptsetuptruelang-7e3c6181.js";import{o as Q,a as T}from"./index-a69e05bf.js";import"./index-db653870.js";/* empty css              */import{H as J,u as E}from"./HttpClient-a8d470b1.js";import{d as $,r as k,Q as S,w as O,g as v,a7 as G,ac as l,j as B,k as n,a9 as f,b as s,u as D,aa as I,ae as L,e as P,ak as W}from"./plugin-vueexport-helper-23a171d5.js";import{M as X}from"./Modal-5e5e8906.js";import{_ as Y}from"./index-2b5a45ec.js";import{I as Z,_ as ee,F as ae}from"./Input-6750102f.js";import{_ as te}from"./TextArea-fa00ec12.js";import{T as oe,_ as ne}from"./TabPane-6246fdd8.js";import"./pickAttrs-349b6a5f.js";class x{static list(){return this.HttpClient.axiosInstance.get("/customer_groups")}static create(a){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Customer Group berhasil ditambah"}).axiosInstance.post("/customer_groups",a)}static update(a,t){return this.HttpClient.withOptions({showSuccessFeedback:!0,successFeedbackMessage:"Customer Group berhasil diupdate"}).axiosInstance.put(`/customer_groups/${a}`,t)}}K(x,"HttpClient",new J);const se={class:"card card-custom card-dense"},ie={class:"card-header"},le={class:"card-title w-100 d-flex justify-content-between"},re=l("h4",{class:"card-label"},"Form Master Grup Customer",-1),de={class:"card-body"},ce={class:"row"},ue={class:"col-lg-6"},me=l("i",{class:"fe fe-save me-2"},null,-1),pe=$({__name:"Form",props:{formData:null,editMode:{type:Boolean}},emits:["cancelEdit","onSuccess"],setup(o,{emit:a}){const t=o,r=k(),e=S({}),h={code:[{required:!0,message:"Kode grup wajib diisi",trigger:"change"}],name:[{required:!0,message:"Nama grup wajib diisi",trigger:"change"}]},{run:m,loading:g,response:d}=E(),{run:p,loading:c,response:w}=E();async function C(){var u,i,b;try{t.editMode?await m(x.update((u=t.formData)==null?void 0:u.id,{name:e.name,description:e.description})):(await m(x.create({code:e.code.toUpperCase(),name:e.name,description:e.description})),(i=d.value)!=null&&i.success&&H()),(b=d.value)!=null&&b.success&&a("onSuccess")}catch{}}async function y(){}function H(){var u;if(t.editMode){for(const i in e)e[i]=void 0;a("cancelEdit")}else(u=r.value)==null||u.resetFields()}function U(){X.confirm({title:"Konfirmasi Hapus Customer Grup",content:"Apakah kamu sudah yakin ingin menghapus data [Edit Here]",cancelText:"Batal",onOk:y})}return O(()=>t.formData,()=>{var u;t.formData&&((u=r.value)==null||u.clearValidate(),e.code=t.formData.code,e.name=t.formData.name,e.description=t.formData.description)}),(u,i)=>{const b=Y,M=Z,N=ee,V=te,F=R,j=ae;return v(),G("div",se,[l("div",ie,[l("div",le,[re,o.editMode?(v(),B(b,{key:0,color:"orange"},{default:n(()=>[f("Mode Edit")]),_:1})):(v(),B(b,{key:1,color:"cyan"},{default:n(()=>[f("Mode Input")]),_:1}))])]),l("div",de,[s(j,{ref_key:"formRef",ref:r,model:e,rules:h,"label-col":{style:{width:"220px"}},colon:!1,"label-align":"left",onFinish:i[3]||(i[3]=_=>D(Q)(r.value,C))},{default:n(()=>[l("div",ce,[l("div",ue,[s(N,{label:"Kode Grup",name:"code",ref:"code"},{default:n(()=>[s(M,{value:e.code,"onUpdate:value":i[0]||(i[0]=_=>e.code=_),valueModifiers:{trim:!0},style:{"text-transform":"uppercase"},disabled:o.editMode},null,8,["value","disabled"])]),_:1},512),s(N,{label:"Nama Grup",name:"name",ref:"name"},{default:n(()=>[s(M,{value:e.name,"onUpdate:value":i[1]||(i[1]=_=>e.name=_)},null,8,["value"])]),_:1},512),s(N,{label:"Deskripsi",name:"description",ref:"description"},{default:n(()=>[s(V,{value:e.description,"onUpdate:value":i[2]||(i[2]=_=>e.description=_)},null,8,["value"])]),_:1},512),s(F,{type:"primary","html-type":"submit",loading:D(g)},{default:n(()=>[me,l("span",null,I(o.editMode?"Edit":"Simpan"),1)]),_:1},8,["loading"]),s(F,{class:"mx-3",onClick:H},{default:n(()=>[f(I(o.editMode?"Batal Edit":"Bersihkan"),1)]),_:1}),o.editMode?(v(),B(F,{key:0,danger:"",type:"primary",onClick:U,loading:D(c)},{default:n(()=>[f(" Hapus ")]),_:1},8,["loading"])):L("",!0)])])]),_:1},8,["model"])])])}}}),fe=$({__name:"DataTable",props:{idx:null},emits:["rowClick"],setup(o,{emit:a}){const t=o,r=S({value:[{field:"code",headerName:"Kode Grup",flex:0,width:120,pinned:"left"},{field:"name",headerName:"Nama Grup"},{field:"description",headerName:"Deskripsi"},{field:"created_at",headerName:"Diinput Tgl",...T},{field:"updated_at",headerName:"Diupdate Tgl",...T},{field:"created_by_user_username",headerName:"Diinput Oleh",flex:0,width:120},{field:"updated_by_user_username",headerName:"Diupdate Oleh",flex:0,width:120}]}),e=S({value:null}),{run:h,response:m,loading:g}=E();async function d(){var c;try{await h(x.list()),(c=m.value)!=null&&c.success&&(e.value=m.value.data)}catch{}}function p(c){a("rowClick",c)}return P(()=>{d()}),O(()=>t.idx,()=>{d()}),(c,w)=>(v(),G("div",null,[s(A,{"row-data":e.value,"column-defs":r.value,loading:D(g),onRowClick:p},null,8,["row-data","column-defs","loading"])]))}}),_e=l("span",null,[l("i",{class:"fe fe-edit-2 me-2"}),f(" Input ")],-1),ve=l("span",null,[l("i",{class:"fe fe-search me-2"}),f(" Browse ")],-1),he=l("i",{class:"fe fe-refresh-cw me-2"},null,-1),$e=$({__name:"index",setup(o){const a=k("1"),t=k(),r=k(!1),e=k(1);function h(d){a.value="1",t.value={...d},r.value=!0}function m(){r.value=!1}function g(d){e.value+=1,d!==void 0&&(r.value=d)}return(d,p)=>{const c=ne,w=R,C=oe;return v(),G("div",null,[s(C,{class:"input-browse-tab",activeKey:a.value,"onUpdate:activeKey":p[1]||(p[1]=y=>a.value=y),animated:""},W({default:n(()=>[s(c,{key:"1"},{tab:n(()=>[_e]),default:n(()=>[s(pe,{"form-data":t.value,"edit-mode":r.value,onCancelEdit:m,onOnSuccess:g},null,8,["form-data","edit-mode"])]),_:1}),s(c,{key:"2"},{tab:n(()=>[ve]),default:n(()=>[s(fe,{idx:e.value,onRowClick:h},null,8,["idx"])]),_:1})]),_:2},[a.value==="2"?{name:"rightExtra",fn:n(()=>[s(w,{size:"small",class:"mt-3",onClick:p[0]||(p[0]=y=>e.value+=1)},{default:n(()=>[he,f(" Refresh Data ")]),_:1})]),key:"0"}:void 0]),1032,["activeKey"])])}}});export{$e as default};
